<files codepage='65001'>
	<file name='zb_system\defend\option.php' crc32='13DDD286'>PD9waHANCg0KLyoqDQogKiBaLUJsb2cgd2l0aCBQSFAuDQogKg0KICogQGF1dGhvciBaLUJsb2dQSFAgVGVhbQ0KICogQHZlcnNpb24gMi4wIDIwMTMtMDYtMTQNCiAqLw0KDQovKioNCiAqIOi/lOWbnumFjee9ri4NCiAqDQogKiBAcGFyYW0NCiAqDQogKiBAcmV0dXJuIGFycmF5DQogKi8NCnJldHVybiBhcnJheSgNCg0KICAgIC8vICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3lhbPpl63nvZHnq5ktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICdaQ19DTE9TRV9XSE9MRV9TSVRFJyA9PiBmYWxzZSwNCiAgICAnWkNfQ0xPU0VfU0lURScgICAgICAgPT4gZmFsc2UsDQoNCiAgICAvLyAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t572R56uZ5Z+65pys6K6+572uLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAnWkNfQkxPR19IT1NUJyAgICAgICAgID0+ICdodHRwOi8vbG9jYWxob3N0LycsDQogICAgJ1pDX0JMT0dfTkFNRScgICAgICAgICA9PiAn5oiR55qE572R56uZJywNCiAgICAnWkNfQkxPR19TVUJOQU1FJyAgICAgID0+ICdHb29kIEx1Y2sgVG8gWW91IScsDQogICAgJ1pDX0JMT0dfVEhFTUUnICAgICAgICA9PiAnZGVmYXVsdCcsDQogICAgJ1pDX0JMT0dfQ1NTJyAgICAgICAgICA9PiAnZGVmYXVsdCcsDQogICAgJ1pDX0JMT0dfQ09QWVJJR0hUJyAgICA9PiAnQ29weXJpZ2h0IFlvdXIgV2ViU2l0ZS5Tb21lIFJpZ2h0cyBSZXNlcnZlZC4nLA0KICAgICdaQ19CTE9HX0xBTkdVQUdFJyAgICAgPT4gJ3poLUNOJywNCiAgICAnWkNfQkxPR19MQU5HVUFHRVBBQ0snID0+ICd6aC1jbicsDQoNCiAgICAvLyAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeaVsOaNruW6k+mFjee9ri0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vbXlzcWx8bXlzcWxpfHBkb19teXNxbHxzcWxpdGV8c3FsaXRlM3xwZG9fc3FsaXRlDQogICAgJ1pDX0RBVEFCQVNFX1RZUEUnID0+ICcnLA0KDQogICAgJ1pDX1NRTElURV9OQU1FJyA9PiAnJywNCiAgICAnWkNfU1FMSVRFX1BSRScgID0+ICd6YnBfJywNCg0KICAgICdaQ19NWVNRTF9TRVJWRVInICAgICA9PiAnbG9jYWxob3N0JywNCiAgICAnWkNfTVlTUUxfVVNFUk5BTUUnICAgPT4gJ3Jvb3QnLA0KICAgICdaQ19NWVNRTF9QQVNTV09SRCcgICA9PiAnJywNCiAgICAnWkNfTVlTUUxfTkFNRScgICAgICAgPT4gJycsDQogICAgJ1pDX01ZU1FMX0NIQVJTRVQnICAgID0+ICd1dGY4JywNCiAgICAnWkNfTVlTUUxfQ09MTEFURScgICAgPT4gJ3V0ZjhfZ2VuZXJhbF9jaScsDQogICAgJ1pDX01ZU1FMX1BSRScgICAgICAgID0+ICd6YnBfJywNCiAgICAnWkNfTVlTUUxfRU5HSU5FJyAgICAgPT4gJ015SVNBTScsDQogICAgJ1pDX01ZU1FMX1BPUlQnICAgICAgID0+ICczMzA2JywNCiAgICAnWkNfTVlTUUxfUEVSU0lTVEVOVCcgPT4gZmFsc2UsDQoNCiAgICAnWkNfUEdTUUxfU0VSVkVSJyAgICAgPT4gJ2xvY2FsaG9zdCcsDQogICAgJ1pDX1BHU1FMX1VTRVJOQU1FJyAgID0+ICdwb3N0Z3JlcycsDQogICAgJ1pDX1BHU1FMX1BBU1NXT1JEJyAgID0+ICcnLA0KICAgICdaQ19QR1NRTF9OQU1FJyAgICAgICA9PiAnJywNCiAgICAnWkNfUEdTUUxfQ0hBUlNFVCcgICAgPT4gJ3V0ZjgnLA0KICAgICdaQ19QR1NRTF9QUkUnICAgICAgICA9PiAnemJwXycsDQogICAgJ1pDX1BHU1FMX1BPUlQnICAgICAgID0+ICc1NDMyJywNCiAgICAnWkNfUEdTUUxfUEVSU0lTVEVOVCcgPT4gZmFsc2UsDQoNCiAgICAvLyAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t5o+S5Lu2LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgICdaQ19VU0lOR19QTFVHSU5fTElTVCcgPT4gJycsDQoNCiAgICAvLyAnLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeWFqOWxgOmFjee9ri0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogICAgJ1pDX0JMT0dfQ0xTSUQnICAgICAgPT4gJycsDQogICAgJ1pDX1RJTUVfWk9ORV9OQU1FJyAgPT4gJ0FzaWEvU2hhbmdoYWknLA0KICAgICdaQ19VUERBVEVfSU5GT19VUkwnID0+ICdodHRwczovL3VwZGF0ZS56YmxvZ2NuLmNvbS9pbmZvLycsDQoNCiAgICAvLyAn5Zu65a6a5Z+f5ZCNLOm7mOiupOS4umZhbHNlDQogICAgJ1pDX1BFUk1BTkVOVF9ET01BSU5fRU5BQkxFJyAgICAgPT4gZmFsc2UsDQoNCiAgICAvLw0KICAgICdaQ19ERUJVR19NT0RFJyAgICAgICAgID0+IGZhbHNlLA0KICAgICdaQ19ERUJVR19NT0RFX1NUUklDVCcgID0+IGZhbHNlLA0KICAgICdaQ19ERUJVR19NT0RFX1dBUk5JTkcnID0+IHRydWUsDQogICAgJ1pDX0RFQlVHX0xPR19FUlJPUicgICAgPT4gZmFsc2UsDQoNCiAgICAvLyAn5b2T5YmNIFotQmxvZyDniYjmnKwNCg0KICAgICdaQ19CTE9HX1BST0RVQ1QnICAgICAgICAgID0+ICdaLUJsb2dQSFAnLA0KICAgICdaQ19CTE9HX1ZFUlNJT04nICAgICAgICAgID0+ICcnLA0KICAgICdaQ19CTE9HX0NPTU1JVCcgICAgICAgICAgID0+ICcnLA0KICAgICdaQ19CTE9HX1BST0RVQ1RfRlVMTCcgICAgID0+ICcnLA0KICAgICdaQ19CTE9HX1BST0RVQ1RfSFRNTCcgICAgID0+ICcnLA0KICAgICdaQ19CTE9HX1BST0RVQ1RfRlVMTEhUTUwnID0+ICcnLA0KDQogICAgLy8gJ+eVmeiogOivhOiuug0KICAgICdaQ19DT01NRU5UX1RVUk5PRkYnICAgICAgICAgICA9PiB0cnVlLA0KICAgICdaQ19DT01NRU5UX1ZFUklGWV9FTkFCTEUnICAgICA9PiBmYWxzZSwNCiAgICAnWkNfQ09NTUVOVF9SRVZFUlNFX09SREVSJyAgICAgPT4gZmFsc2UsDQogICAgJ1pDX0NPTU1FTlRfQVVESVQnICAgICAgICAgICAgID0+IGZhbHNlLA0KICAgICdaQ19DT01NRU5UX1ZBTElEQ01US0VZX0VOQUJMRScgPT4gZmFsc2UsDQoNCiAgICAvLyAn6aqM6K+B56CBDQogICAgJ1pDX1ZFUklGWUNPREVfU1RSSU5HJyA9PiAnQUJDREVGR0hLTU5QUlNUVVZXWFlaMjM0NTY3ODknLA0KICAgICdaQ19WRVJJRllDT0RFX1dJRFRIJyAgPT4gOTAsDQogICAgJ1pDX1ZFUklGWUNPREVfSEVJR0hUJyA9PiAzMCwNCiAgICAnWkNfVkVSSUZZQ09ERV9GT05UJyAgID0+ICd6Yl9zeXN0ZW0vZGVmZW5kL2FyaWFsLnR0ZicsDQoNCiAgICAvLyAn6aG16Z2i5ZCE6aG55YiX5pWwDQogICAgJ1pDX0RJU1BMQVlfQ09VTlQnICAgICAgICAgID0+IDEwLA0KICAgICdaQ19ESVNQTEFZX09SREVSJyAgICAgICAgICA9PiAnbG9nX1Bvc3RUaW1lJywNCiAgICAnWkNfUEFHRUJBUl9DT1VOVCcgICAgICAgICAgPT4gMTAsDQogICAgJ1pDX0NPTU1FTlRTX0RJU1BMQVlfQ09VTlQnID0+IDEwMCwNCg0KICAgICdaQ19ESVNQTEFZX1NVQkNBVEVHT1JZUycgPT4gdHJ1ZSwNCg0KICAgIC8vICfmnYLpobkNCiAgICAnWkNfUlNTMl9DT1VOVCcgICAgICAgPT4gMTAsDQogICAgJ1pDX1JTUzJfT1JERVInICAgICAgID0+ICdsb2dfUG9zdFRpbWUnLA0KICAgICdaQ19SU1NfRVhQT1JUX1dIT0xFJyA9PiB0cnVlLA0KDQogICAgLy8gJ+WQjuWPsOeuoeeQhg0KICAgICdaQ19NQU5BR0VfQ09VTlQnID0+IDUwLA0KICAgICdaQ19NQU5BR0VfT1JERVInID0+ICdsb2dfUG9zdFRpbWUnLA0KICAgIA0KICAgIC8vIOeZu+W9leebuOWFsw0KICAgICdaQ19MT0dJTl9DU1JGQ0hFQ0tfRU5BQkxFJyA9PiB0cnVlLA0KICAgICdaQ19MT0dJTl9WRVJJRllfRU5BQkxFJyAgICA9PiB0cnVlLA0KDQogICAgLy8gJ+ihqOaDheebuOWFsw0KICAgICdaQ19FTU9USUNPTlNfRklMRU5BTUUnID0+ICdmYWNlJywNCg0KICAgICdaQ19FTU9USUNPTlNfRklMRVRZUEUnID0+ICdwbmd8Z2lmfGpwZycsDQoNCiAgICAnWkNfRU1PVElDT05TX0ZJTEVTSVpFJyA9PiAnMTYnLA0KDQogICAgLy8gJ+S4iuS8oOebuOWFsw0KICAgICdaQ19VUExPQURfRklMRVRZUEUnID0+ICdqcGd8Z2lmfHBuZ3xqcGVnfGJtcHx3ZWJwfHBzZHx3bWZ8aWNvfHJwbXxkZWJ8dGFyfGd6fHh6fHNpdHw3enxiejJ8emlwfHJhcnx4bWx8eHNsfHN2Z3xzdmd6fHJ0Znxkb2N8ZG9jeHxwcHR8cHB0eHx4bHN8eGxzeHx3cHN8Y2htfHR4dHxtZHxwZGZ8bXAzfGZsYWN8YXBlfG1wNHxta3Z8YXZpfG1wZ3xybXxyYXxybXZifG1vdnx3bXZ8d21hfHRvcnJlbnR8YXBrfGpzb258emJhfGd6YmEnLA0KICAgICdaQ19VUExPQURfRklMRVNJWkUnID0+IDIsDQogICAgJ1pDX1VQTE9BRF9ESVJfWUVBUk1PTlRIREFZJyA9PiBmYWxzZSwNCg0KICAgIC8vICfnlKjmiLflkI0s5a+G56CBLOivhOiuuumVv+W6puetiemZkOWItg0KICAgICdaQ19VU0VSTkFNRV9NSU4nID0+IDIsDQoNCiAgICAnWkNfVVNFUk5BTUVfTUFYJyA9PiA1MCwNCg0KICAgICdaQ19QQVNTV09SRF9NSU4nID0+IDgsDQoNCiAgICAnWkNfUEFTU1dPUkRfTUFYJyA9PiAyMCwNCg0KICAgICdaQ19FTUFJTF9NQVgnID0+IDUwLA0KDQogICAgJ1pDX0hPTUVQQUdFX01BWCcgPT4gMTAwLA0KDQogICAgJ1pDX0NPTlRFTlRfTUFYJyA9PiAxMDAwLA0KDQogICAgJ1pDX0FSVElDTEVfVElUTEVfTUFYJyA9PiAxMDAsDQogICAgJ1pDX0NBVEVHT1JZX05BTUVfTUFYJyA9PiA1MCwNCiAgICAnWkNfVEFHU19OQU1FX01BWCcgICAgID0+IDUwLA0KICAgICdaQ19NT0RVTEVfTkFNRV9NQVgnICAgPT4gNTAsDQoNCiAgICAvLyAn6Ieq5Yqo5pGY6KaB5a2X5pWwDQogICAgJ1pDX0FSVElDTEVfRVhDRVJQVF9NQVgnID0+IDI1MCwNCiAgICAnWkNfQVJUSUNMRV9JTlRST19XSVRIX1RFWFQnID0+IGZhbHNlLA0KDQogICAgLy8gJ+S+p+agj+ivhOiuuuacgOWkp+Wtl+aVsA0KICAgICdaQ19DT01NRU5UX0VYQ0VSUFRfTUFYJyA9PiAyMCwNCg0KICAgIC8vICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3pnZnmgIHljJbphY3nva4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgIC8vICfmlofnq6As6aG16Z2i57G7LOWIl+ihqOmhteeahOmdmeaAgeaooeW8j0FDVElWRSBvciBSRVdSSVRFDQogICAgJ1pDX1NUQVRJQ19NT0RFJyA9PiAnQUNUSVZFJywNCg0KICAgICdaQ19BUlRJQ0xFX1JFR0VYJyA9PiAneyVob3N0JX0/aWQ9eyVpZCV9JywNCg0KICAgICdaQ19QQUdFX1JFR0VYJyA9PiAneyVob3N0JX0/aWQ9eyVpZCV9JywNCg0KICAgICdaQ19DQVRFR09SWV9SRUdFWCcgPT4gJ3slaG9zdCV9P2NhdGU9eyVpZCV9JnBhZ2U9eyVwYWdlJX0nLA0KDQogICAgJ1pDX0FVVEhPUl9SRUdFWCcgPT4gJ3slaG9zdCV9P2F1dGg9eyVpZCV9JnBhZ2U9eyVwYWdlJX0nLA0KDQogICAgJ1pDX1RBR1NfUkVHRVgnID0+ICd7JWhvc3QlfT90YWdzPXslaWQlfSZwYWdlPXslcGFnZSV9JywNCg0KICAgICdaQ19EQVRFX1JFR0VYJyA9PiAneyVob3N0JX0/ZGF0ZT17JWRhdGUlfSZwYWdlPXslcGFnZSV9JywNCg0KICAgICdaQ19JTkRFWF9SRUdFWCcgPT4gJ3slaG9zdCV9P3BhZ2U9eyVwYWdlJX0nLA0KDQogICAgJ1pDX0FMSUFTX0JBQ0tfQVRUUicgPT4gJ05hbWUnLA0KDQogICAgJ1pDX0RBVEVUSU1FX1NFUEFSQVRPUicgPT4gJy0nLA0KICAgICdaQ19EQVRFVElNRV9SVUxFJyA9PiAnWS1uJywNCiAgICAnWkNfREFURVRJTUVfV0lUSERBWV9SVUxFJyA9PiAnWS1uLWonLA0KDQogICAgJ1pDX1NFQVJDSF9DT1VOVCcgPT4gMjAsDQogICAgJ1pDX1NFQVJDSF9SRUdFWCcgPT4gJ3slaG9zdCV9c2VhcmNoLnBocD9xPXslcSV9JnBhZ2U9eyVwYWdlJX0nLA0KDQogICAgLy/liJfooajpobXvvIxQT1NU6aG177yM5pCc57Si6aG155qE6buY6K6k5qih5p2/DQogICAgJ1pDX0lOREVYX0RFRkFVTFRfVEVNUExBVEUnID0+ICdpbmRleCcsDQogICAgJ1pDX1BPU1RfREVGQVVMVF9URU1QTEFURScgID0+ICdzaW5nbGUnLA0KICAgICdaQ19TRUFSQ0hfREVGQVVMVF9URU1QTEFURScgID0+ICdzZWFyY2gnLA0KDQogICAgJ1pDX1NJREVCQVJfT1JERVInICA9PiAnY2FsZW5kYXJ8Y29udHJvbHBhbmVsfGNhdGFsb2d8c2VhcmNocGFuZWx8Y29tbWVudHN8YXJjaGl2ZXN8ZmF2b3JpdGV8bGlua3xtaXNjJywNCiAgICAnWkNfU0lERUJBUjJfT1JERVInID0+ICcnLA0KICAgICdaQ19TSURFQkFSM19PUkRFUicgPT4gJycsDQogICAgJ1pDX1NJREVCQVI0X09SREVSJyA9PiAnJywNCiAgICAnWkNfU0lERUJBUjVfT1JERVInID0+ICcnLA0KICAgICdaQ19TSURFQkFSNl9PUkRFUicgPT4gJycsDQogICAgJ1pDX1NJREVCQVI3X09SREVSJyA9PiAnJywNCiAgICAnWkNfU0lERUJBUjhfT1JERVInID0+ICcnLA0KICAgICdaQ19TSURFQkFSOV9PUkRFUicgPT4gJycsDQogICAgLy8nWkNfU0lERUJBUlNfREVGQVVMVCcgID0+ICd7IjEiOiJjYWxlbmRhcnxjb250cm9scGFuZWx8Y2F0YWxvZ3xzZWFyY2hwYW5lbHxjb21tZW50c3xhcmNoaXZlc3xmYXZvcml0ZXxsaW5rfG1pc2MiLCIyIjoiIiwiMyI6IiIsIjQiOiIiLCI1IjoiIiwiNiI6IiIsIjciOiIiLCI4IjoiIiwiOSI6IiJ9JzsNCg0KICAgIC8vICctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLeWFtuWugy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgICAvLyAn5Luj56CB6auY5LquDQogICAgJ1pDX1NZTlRBWEhJR0hMSUdIVEVSX0VOQUJMRScgPT4gdHJ1ZSwNCiAgICAvLyAn5rqQ56CB57yW6L6R6auY5LquDQogICAgJ1pDX0NPREVNSVJST1JfRU5BQkxFJyA9PiB0cnVlLA0KICAgICdaQ19BTExPV19BVURJVFRJTkdfTUVNQkVSX1ZJU0lUX01BTkFHRScgPT4gZmFsc2UsDQogICAgJ1pDX09VVFBVVF9PUFRJT05fTUVNQkVSX01BWF9MRVZFTCcgPT4gMCwNCiAgICAnWkNfQ0FURUdPUllfTUFOQUdFX0xFR0FDWV9ESVNQTEFZJyA9PiB0cnVlLA0KICAgICdaQ19MT0FETUVNQkVSU19MRVZFTCcgICAgICAgICAgID0+IDEsDQogICAgLy9aQ19MQVNUX1ZFUlNJT04g5pys5oSP5piv5oyH5pWw5o2u5bqT5a+55bqU55qE57O757uf54mI5pys5Y+377yM6Z2e5b2T5YmN57O757uf5pyq5pu05paw54mI5pys5Y+3DQogICAgJ1pDX0xBU1RfVkVSU0lPTicgICAgICAgICAgICAgICAgPT4gJycsDQogICAgJ1pDX01PRFVMRV9DQVRBTE9HX1NUWUxFJyAgICAgICAgPT4gMCwNCiAgICAnWkNfTU9EVUxFX0FSQ0hJVkVTX1NUWUxFJyAgICAgICA9PiAwLA0KICAgICdaQ19WSUVXTlVNU19UVVJOT0ZGJyAgICAgICAgICAgID0+IGZhbHNlLA0KICAgICdaQ19MSVNUT05UT1BfVFVSTk9GRicgICAgICAgICAgID0+IGZhbHNlLA0KICAgICdaQ19SRUxBVEVETElTVF9DT1VOVCcgICAgICAgICAgID0+IDEwLA0KICAgICdaQ19SVU5JTkZPX0RJU1BMQVknICAgICAgICAgICAgID0+IHRydWUsDQogICAgJ1pDX1BPU1RfQUxJQVNfVVNFX0lEX05PVF9USVRMRScgPT4gZmFsc2UsDQogICAgJ1pDX0NPTVBBVElCTEVfQVNQX1VSTCcgICAgICAgICAgPT4gdHJ1ZSwNCiAgICAnWkNfTEFSR0VfREFUQScgICAgICAgICAgICAgICAgICA9PiBmYWxzZSwNCiAgICAnWkNfVkVSU0lPTl9JTl9IRUFERVInICAgICAgICAgICA9PiB0cnVlLA0KICAgICdaQ19BRERJVElPTkFMX1NFQ1VSSVRZJyAgICAgICAgID0+IHRydWUsDQogICAgJ1pDX1hNTFJQQ19FTkFCTEUnICAgICAgICAgICAgICAgPT4gZmFsc2UsDQogICAgJ1pDX1hNTFJQQ19VU0VfV0VCVE9LRU4nICAgICAgICAgPT4gZmFsc2UsDQogICAgJ1pDX1VTSU5HX0NETl9HVUVTVElQX1RZUEUnICAgICAgPT4gJ1JFTU9URV9BRERSJywNCiAgICAnWkNfUE9TVF9CQVRDSF9ERUxFVEUnICAgICAgICAgICA9PiBmYWxzZSwNCiAgICAnWkNfSlNfMzA0X0VOQUJMRScgICAgICAgICAgICAgICA9PiB0cnVlLA0KICAgICdaQ19ERUxNRU1CRVJfV0lUSF9BTExEQVRBJyAgICAgID0+IGZhbHNlLA0KICAgICdaQ19USFVNQl9ERUZBVUxUX1FVQUxJVFknICAgICAgID0+IDkwLA0KICAgICdaQ19GSVhfTU9EVUxFX01JWEVEX0ZJTEVOQU1FJyAgID0+IHRydWUsDQoNCiAgICAvLyBBUEkg55u45YWzDQogICAgJ1pDX0FQSV9FTkFCTEUnICAgICAgICAgICAgICAgICAgICAgPT4gZmFsc2UsDQogICAgJ1pDX0FQSV9USFJPVFRMRV9FTkFCTEUnICAgICAgICAgICAgPT4gZmFsc2UsDQogICAgJ1pDX0FQSV9USFJPVFRMRV9NQVhfUkVRU19QRVJfTUlOJyAgPT4gNjAsDQogICAgJ1pDX0FQSV9ESVNQTEFZX0NPVU5UJyAgICAgICAgICAgICAgPT4gMTAsDQopOw0K</file>
	<file name='zb_system\function\c_system_event.php' crc32='DBF026A6'>PD9waHANCg0KLyoqDQogKiDkuovku7bmk43kvZznm7jlhbPlh73mlbAuDQogKi8NCg0KaWYgKCFkZWZpbmVkKCdaQlBfUEFUSCcpKSB7DQogICAgZXhpdCgnQWNjZXNzIGRlbmllZCcpOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQovKioNCiAqIOmqjOivgeeZu+W9lS4NCiAqDQogKiBAcGFyYW0gYm9vbCAkdGhyb3dFeGNlcHRpb24NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBWZXJpZnlMb2dpbigkdGhyb3dFeGNlcHRpb24gPSB0cnVlLCAkaWdub3JlVmFsaWRDb2RlID0gdHJ1ZSwgJGlnbm9yZUNzcmZDaGVjayA9IHRydWUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19MT0dJTl9DU1JGQ0hFQ0tfRU5BQkxFJ10gJiYgJGlnbm9yZUNzcmZDaGVjayA9PSBmYWxzZSkgew0KICAgICAgICAkemJwLT5jc3JmRXhwaXJhdGlvbk1pbnV0ZSA9IDU7DQogICAgICAgIGlmICgkemJwLT5WZXJpZnlDU1JGVG9rZW4oR2V0VmFycygnY3NyZlRva2VuJyAsICdQT1NUJyksICdsb2dpbicsICdtaW51dGUnKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDUsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19MT0dJTl9WRVJJRllfRU5BQkxFJ10gJiYgJGlnbm9yZVZhbGlkQ29kZSA9PSBmYWxzZSkgew0KICAgICAgICAkemJwLT52ZXJpZnlDb2RlRXhwaXJhdGlvbk1pbnV0ZSA9IDU7DQogICAgICAgIGlmICgkemJwLT5DaGVja1ZhbGlkQ29kZShHZXRWYXJzKCd2ZXJpZnknICwgJ1BPU1QnKSwgJ2xvZ2luJywgJ21pbnV0ZScpID09IGZhbHNlKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoMzgsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAvKiBAdmFyIE1lbWJlciAkbSAqLw0KICAgICRtID0gbnVsbDsNCiAgICBpZiAoJHpicC0+VmVyaWZ5X01ENSh0cmltKEdldFZhcnMoJ3VzZXJuYW1lJywgJ1BPU1QnKSksIHRyaW0oR2V0VmFycygncGFzc3dvcmQnLCAnUE9TVCcpKSwgJG0pKSB7DQogICAgICAgICR6YnAtPnVzZXIgPSAkbTsNCiAgICAgICAgJHpicC0+aXNsb2dpbiA9IHRydWU7DQogICAgICAgICRzZCA9IChmbG9hdCkgR2V0VmFycygnc2F2ZWRhdGUnKTsNCiAgICAgICAgJHNkID0gKCRzZCA8IDEpID8gMSA6ICRzZDsgLy8gbXVzdCA+PSAxIGRheQ0KICAgICAgICAkc2R0ID0gKHRpbWUoKSArIDM2MDAgKiAyNCAqICRzZCk7DQogICAgICAgIFNldExvZ2luQ29va2llKCRtLCAoaW50KSAkc2R0KTsNCg0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WZXJpZnlMb2dpbl9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9WZXJpZnlMb2dpbl9GYWlsZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoKTsNCiAgICAgICAgICAgIGlmICgkZnBzaWduYWwgPT0gUExVR0lOX0VYSVRTSUdOQUxfUkVUVVJOKSB7DQogICAgICAgICAgICAgICAgJGZwc2lnbmFsID0gUExVR0lOX0VYSVRTSUdOQUxfTk9ORTsNCg0KICAgICAgICAgICAgICAgIHJldHVybiAkZnByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJHRocm93RXhjZXB0aW9uKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoOCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQogKiDorr7nva7nmbvlvZVDb29raWXvvIznm7TmjqXnmbvlvZXor6XnlKjmiLcuDQogKg0KICogQHBhcmFtIE1lbWJlciAkdXNlcg0KICogQHBhcmFtIGludCAgICAkY29va2llVGltZQ0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBTZXRMb2dpbkNvb2tpZSgkdXNlciwgJGNvb2tpZVRpbWUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgJGFkZGluZm8gPSBhcnJheSgpOw0KICAgICRhZGRpbmZvWydjaGthZG1pbiddID0gKGludCkgJHpicC0+Q2hlY2tSaWdodHMoJ2FkbWluJyk7DQogICAgJGFkZGluZm9bJ2Noa2FydGljbGUnXSA9IChpbnQpICR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlRWR0Jyk7DQogICAgJGFkZGluZm9bJ2xldmVsbmFtZSddID0gJHVzZXItPkxldmVsTmFtZTsNCiAgICAkYWRkaW5mb1sndXNlcmlkJ10gPSAkdXNlci0+SUQ7DQogICAgJGFkZGluZm9bJ3VzZXJhbGlhcyddID0gJHVzZXItPlN0YXRpY05hbWU7DQogICAgJHRva2VuID0gJHpicC0+R2VuZXJhdGVVc2VyVG9rZW4oJHVzZXIsICRjb29raWVUaW1lKTsNCiAgICAkc2VjdXJlID0gSFRUUF9TQ0hFTUUgPT0gJ2h0dHBzOi8vJzsNCiAgICBzZXRjb29raWUoJ3VzZXJuYW1lXycgLiBoYXNoKCJjcmMzMmIiLCAkemJwLT5ndWlkKSwgJHVzZXItPk5hbWUsICRjb29raWVUaW1lLCAkemJwLT5jb29raWVzcGF0aCwgJHpicC0+Y29va2llX2RvbWFpbiwgJHNlY3VyZSwgJHpicC0+Y29va2llX2h0dHBvbmx5KTsNCiAgICBzZXRjb29raWUoJ3Rva2VuXycgLiBoYXNoKCJjcmMzMmIiLCAkemJwLT5ndWlkKSwgJHRva2VuLCAkY29va2llVGltZSwgJHpicC0+Y29va2llc3BhdGgsICR6YnAtPmNvb2tpZV9kb21haW4sICRzZWN1cmUsICR6YnAtPmNvb2tpZV9odHRwb25seSk7DQogICAgc2V0Y29va2llKCdhZGRpbmZvJyAuIHN0cl9yZXBsYWNlKCcvJywgJycsICR6YnAtPmNvb2tpZXNwYXRoKSwganNvbl9lbmNvZGUoJGFkZGluZm8pLCAkY29va2llVGltZSwgJHpicC0+Y29va2llc3BhdGgsICR6YnAtPmNvb2tpZV9kb21haW4sICRzZWN1cmUsIGZhbHNlKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOazqOmUgOeZu+W9lS4NCiAqLw0KZnVuY3Rpb24gTG9nb3V0KCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgIHNldGNvb2tpZSgndXNlcm5hbWVfJyAuIGhhc2goImNyYzMyYiIsICR6YnAtPmd1aWQpLCAnJywgKHRpbWUoKSAtIDM2MDApLCAkemJwLT5jb29raWVzcGF0aCk7DQogICAgc2V0Y29va2llKCd0b2tlbl8nIC4gaGFzaCgiY3JjMzJiIiwgJHpicC0+Z3VpZCksICcnLCAodGltZSgpIC0gMzYwMCksICR6YnAtPmNvb2tpZXNwYXRoKTsNCiAgICBzZXRjb29raWUoJ3Bhc3N3b3JkJywgJycsICh0aW1lKCkgLSAzNjAwKSwgJHpicC0+Y29va2llc3BhdGgpOw0KICAgIHNldGNvb2tpZSgiYWRkaW5mbyIgLiBzdHJfcmVwbGFjZSgnLycsICcnLCAkemJwLT5jb29raWVzcGF0aCksICcnLCAodGltZSgpIC0gMzYwMCksICR6YnAtPmNvb2tpZXNwYXRoKTsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0xvZ291dF9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoKTsNCiAgICB9DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCmZ1bmN0aW9uIFJlZGlyZWN0X3RvX3NlYXJjaCgpDQp7DQogICAgUmVkaXJlY3RfY21kX3RvX3NlYXJjaCgwKTsNCn0NCg0KZnVuY3Rpb24gUmVkaXJlY3RfY21kX3RvX3NlYXJjaCgkcG9zdF90eXBlID0gMCkNCnsNCiAgICBnbG9iYWwgJHpicCwgJGFjdGlvbjsNCiAgICAvLyRxID0gcmF3dXJsZW5jb2RlKHRyaW0oc3RyaXBfdGFncyhHZXRWYXJzKCdxJywgJ1BPU1QnKSkpKTsNCiAgICAvL1JlZGlyZWN0MzAyKCR6YnAtPnNlYXJjaHVybCAuICc/cT0nIC4gJHEpOw0KDQogICAgJHJvdXRlID0gJHpicC0+R2V0UG9zdFR5cGVfU3ViKCRwb3N0X3R5cGUsICdyb3V0ZXMnLCAncG9zdF9hcnRpY2xlX3NlYXJjaCcpOw0KICAgIGlmICghZW1wdHkoJHJvdXRlKSkgew0KICAgICAgICAkciA9IG5ldyBVcmxSdWxlKCR6YnAtPkdldFJvdXRlKCRyb3V0ZSkpOw0KICAgIH0gZWxzZSB7DQogICAgICAgICR1cmxydWxlID0gJHpicC0+R2V0UG9zdFR5cGUoJHBvc3RfdHlwZSwgJ3NlYXJjaF91cmxydWxlJyk7DQogICAgICAgICRyID0gbmV3IFVybFJ1bGUoJHVybHJ1bGUpOw0KICAgIH0NCg0KICAgICRxID0gcmF3dXJsZW5jb2RlKHRyaW0oc3RyaXBfdGFncyhHZXRWYXJzKCdxJywgJ1BPU1QnKSkpKTsNCiAgICAkci0+UnVsZXNbJ3slcGFnZSV9J10gPSAnJzsNCiAgICAkci0+UnVsZXNbJ3slcSV9J10gPSAkcTsNCiAgICAkci0+UnVsZXNbJ3slc2VhcmNoJX0nXSA9ICRxOw0KICAgICRyLT5SdWxlc1sneyVwb3N0dHlwZSV9J10gPSAkcG9zdF90eXBlOw0KDQogICAgJHVybCA9ICRyLT5NYWtlKCk7DQoNCiAgICBSZWRpcmVjdF9jbWRfZW5kKCR1cmwpOw0KfQ0KDQpmdW5jdGlvbiBSZWRpcmVjdF90b19pbnNpZGUoJHVybCkNCnsNCiAgICBSZWRpcmVjdF9jbWRfZnJvbV9hcmdzX3dpdGhfbG9nZ2VkaW4oJHVybCk7DQp9DQoNCi8qKg0KICog5qOA5p+l5bey55m75b2V5ZCO5omN6Lez6L2s5Yiw5YaF6YOo6aG16Z2i55qEQ01E6aG16Z2i6Lez6L2s5Ye95pWwDQogKi8NCmZ1bmN0aW9uIFJlZGlyZWN0X2NtZF9mcm9tX2FyZ3Nfd2l0aF9sb2dnZWRpbigkdXJsKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmIChlbXB0eSgkemJwLT51c2VyLT5JRCkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpZiAoZW1wdHkoJHVybCkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICAkYSA9IHBhcnNlX3VybCgkdXJsKTsNCiAgICAkYiA9IHBhcnNlX3VybCgkemJwLT5ob3N0KTsNCiAgICBpZiAoaXNzZXQoJGFbJ2hvc3QnXSkgJiYgaXNzZXQoJGJbJ2hvc3QnXSkgJiYgc3RyY2FzZWNtcCgkYVsnaG9zdCddLCAkYlsnaG9zdCddKSA9PSAwKSB7DQogICAgICAgIFJlZGlyZWN0X2NtZF9lbmQoJHVybCk7DQogICAgfQ0KfQ0KDQovKioNCiAqIENNROmhtemdoue7k+adn+WJjeeahOi3s+i9rOWHveaVsC4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fQ21kX1JlZGlyZWN0DQogKi8NCmZ1bmN0aW9uIFJlZGlyZWN0X2NtZF9lbmQoJHVybCkNCnsNCiAgICBnbG9iYWwgJHpicCwgJGFjdGlvbjsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0NtZF9SZWRpcmVjdCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCR1cmwsICRhY3Rpb24pOw0KICAgIH0NCg0KICAgIFJlZGlyZWN0MzAyKCR1cmwpOw0KfQ0KDQovKioNCiAqIENNROmhtemdoue7k+adn+WJjeeahOi3s+i9rOWHveaVsFNjcmlwdOeJiOacrC4NCiAqDQogKiBAYXBpIEZpbHRlcl9QbHVnaW5fQ21kX1JlZGlyZWN0DQogKi8NCmZ1bmN0aW9uIFJlZGlyZWN0X2NtZF9lbmRfYnlfc2NyaXB0KCR1cmwpDQp7DQogICAgZ2xvYmFsICR6YnAsICRhY3Rpb247DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9DbWRfUmVkaXJlY3QnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkdXJsLCAkYWN0aW9uKTsNCiAgICB9DQoNCiAgICBSZWRpcmVjdEJ5U2NyaXB0KCR1cmwpOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQovKioNCiAqIOmAmueUqOeahOaPkOS6pFBvc3Tooajlr7nosaHmlbDmja4uDQogKg0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1Bvc3RQb3N0X0NvcmUNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9Qb3N0UG9zdF9TdWNjZWVkDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIFBvc3R8ZmFsc2UNCiAqLw0KZnVuY3Rpb24gUG9zdFBvc3QoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnVHlwZSddKSkgew0KICAgICAgICAkX1BPU1RbJ1R5cGUnXSA9IChpbnQpICRfUE9TVFsnVHlwZSddOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRfUE9TVFsnVHlwZSddID0gMDsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydQb3N0VGltZSddKSkgew0KICAgICAgICAkX1BPU1RbJ1Bvc3RUaW1lJ10gPSBzdHJ0b3RpbWUoJF9QT1NUWydQb3N0VGltZSddKTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnQXV0aG9ySUQnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFjdGlvbnMgPSAkemJwLT5HZXRQb3N0VHlwZSgkX1BPU1RbJ1R5cGUnXSwgJ2FjdGlvbnMnKTsNCiAgICAgICAgaWYgKCgkX1BPU1RbJ0F1dGhvcklEJ10gIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJGFjdGlvbnNbJ2FsbCddKSkpIHsNCiAgICAgICAgICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICAgICB9DQogICAgICAgIHVuc2V0KCRhY3Rpb25zKTsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydBbGlhcyddKSkgew0KICAgICAgICAkX1BPU1RbJ0FsaWFzJ10gPSBGb3JtYXRTdHJpbmcoJF9QT1NUWydBbGlhcyddLCAnW25vc2NyaXB0XScpOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ1RhZyddKSkgew0KICAgICAgICAkX1BPU1RbJ1RhZyddID0gRm9ybWF0U3RyaW5nKCRfUE9TVFsnVGFnJ10sICdbbm9zY3JpcHRdJyk7DQogICAgICAgICRfUE9TVFsnVGFnJ10gPSBQb3N0QXJ0aWNsZV9DaGVja1RhZ0FuZENvbnZlcnRJRHRvU3RyaW5nKCRfUE9TVFsnVGFnJ10sICRfUE9TVFsnVHlwZSddKTsNCiAgICB9DQoNCiAgICAkcG9zdCA9IG5ldyBQb3N0KCk7DQogICAgJHBvc3QtPlR5cGUgPSAkX1BPU1RbJ1R5cGUnXTsNCg0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgICAgICAkaSA9IDA7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJHBvc3QtPlR5cGVBY3Rpb25zWyduZXcnXSkpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJHBvc3QtPlR5cGVBY3Rpb25zWydwdWJsaWMnXSkpIHsNCiAgICAgICAgICAgICRfUE9TVFsnU3RhdHVzJ10gPSBaQ19QT1NUX1NUQVRVU19BVURJVElORzsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRwb3N0ID0gJHpicC0+R2V0UG9zdEJ5SUQoR2V0VmFycygnSUQnLCAnUE9TVCcpKTsNCiAgICAgICAgaWYgKCRwb3N0LT5JRCA9PSAwKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoOSwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCRwb3N0LT5UeXBlQWN0aW9uc1snZWRpdCddKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCghJHpicC0+Q2hlY2tSaWdodHMoJHBvc3QtPlR5cGVBY3Rpb25zWydwdWJsaWMnXSkpICYmICgkcG9zdC0+U3RhdHVzID09IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HKSkgew0KICAgICAgICAgICAgJF9QT1NUWydTdGF0dXMnXSA9IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HOw0KICAgICAgICB9DQogICAgICAgIGlmICgoJHBvc3QtPkF1dGhvcklEICE9ICR6YnAtPnVzZXItPklEKSAmJiAoISR6YnAtPkNoZWNrUmlnaHRzKCRwb3N0LT5UeXBlQWN0aW9uc1snYWxsJ10pKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmb3JlYWNoICgkemJwLT5kYXRhaW5mb1snUG9zdCddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGtleV0pKSB7DQogICAgICAgICAgICAkcG9zdC0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIEZpbHRlck1ldGEoJHBvc3QpOw0KICAgICRwb3N0LT5VcGRhdGVUaW1lID0gdGltZSgpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFBvc3RfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRwb3N0KTsNCiAgICB9DQoNCiAgICBGaWx0ZXJQb3N0KCRwb3N0KTsNCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0xBUkdFX0RBVEEnXSA9PSBmYWxzZSkgew0KICAgICAgICAvL0NvdW50UG9zdEFycmF5KGFycmF5KCRwb3N0LT5JRCkpOw0KICAgICAgICBDb3VudFBvc3QoJHBvc3QsIG51bGwpOw0KICAgIH0NCg0KICAgICRwb3N0LT5TYXZlKCk7DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY29tbWVudHMnKTsNCg0KICAgIGlmIChHZXRWYXJzKCdBZGROYXZiYXInLCAnUE9TVCcpID09PSAnMCcpIHsNCiAgICAgICAgJHpicC0+RGVsSXRlbVRvTmF2YmFyKCdwYWdlJywgJHBvc3QtPklEKTsNCiAgICB9DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PT0gJzEnKSB7DQogICAgICAgICR6YnAtPkFkZEl0ZW1Ub05hdmJhcigncGFnZScsICRwb3N0LT5JRCwgJHBvc3QtPlRpdGxlLCAkcG9zdC0+VXJsKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0UG9zdF9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJHBvc3QpOw0KICAgIH0NCg0KICAgIHJldHVybiAkcG9zdDsNCn0NCg0KLyoqDQogKiDpgJrnlKjnmoTliKDpmaRQb3N06KGo5a+56LGh5pWw5o2uLg0KICoNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9EZWxQb3N0X0NvcmUNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9EZWxQb3N0X1N1Y2NlZWQNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbFBvc3QoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnKTsNCg0KICAgICRwb3N0ID0gJHpicC0+R2V0UG9zdEJ5SUQoJGlkKTsNCg0KICAgIGlmICgkcG9zdC0+SUQgPiAwKSB7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJHBvc3QtPlR5cGVBY3Rpb25zWydkZWwnXSkpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygkcG9zdC0+VHlwZUFjdGlvbnNbJ2FsbCddKSAmJiAkcG9zdC0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsUG9zdF9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCRwb3N0KTsNCiAgICAgICAgfQ0KDQogICAgICAgICRwb3N0LT5EZWwoKTsNCg0KICAgICAgICBEZWxBcnRpY2xlX0NvbW1lbnRzKCRwb3N0LT5JRCk7DQoNCiAgICAgICAgJHpicC0+RGVsSXRlbVRvTmF2YmFyKCR6YnAtPkdldFBvc3RUeXBlKCRwb3N0LT5UeXBlLCAnbmFtZScpLCAkcG9zdC0+SUQpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbFBvc3RfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkcG9zdCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDmj5DkuqTmlofnq6DmlbDmja4uDQogKg0KICogQGFwaSBGaWx0ZXJfUGx1Z2luX1Bvc3RBcnRpY2xlX0NvcmUNCiAqIEBhcGkgRmlsdGVyX1BsdWdpbl9Qb3N0QXJ0aWNsZV9TdWNjZWVkDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIFBvc3R8ZmFsc2UNCiAqLw0KZnVuY3Rpb24gUG9zdEFydGljbGUoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfQ09PS0lFWyd0aW1lem9uZSddKSkgew0KICAgICAgICAkdHogPSBHZXRWYXJzKCd0aW1lem9uZScsICdDT09LSUUnKTsNCiAgICAgICAgaWYgKGlzX251bWVyaWMoJHR6KSkgew0KICAgICAgICAgICAgZGF0ZV9kZWZhdWx0X3RpbWV6b25lX3NldCgnRXRjL0dNVCcgLiBzcHJpbnRmKCclK2QnLCAtJHR6KSk7DQogICAgICAgIH0NCiAgICAgICAgdW5zZXQoJHR6KTsNCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydUYWcnXSkpIHsNCiAgICAgICAgJF9QT1NUWydUYWcnXSA9IEZvcm1hdFN0cmluZygkX1BPU1RbJ1RhZyddLCAnW25vc2NyaXB0XScpOw0KICAgICAgICAkX1BPU1RbJ1RhZyddID0gUG9zdEFydGljbGVfQ2hlY2tUYWdBbmRDb252ZXJ0SUR0b1N0cmluZygkX1BPU1RbJ1RhZyddLCAwKTsNCiAgICB9DQogICAgaWYgKGlzc2V0KCRfUE9TVFsnQ29udGVudCddKSkgew0KICAgICAgICAkX1BPU1RbJ0NvbnRlbnQnXSA9IHByZWdfcmVwbGFjZSgiLzxociBjbGFzcz1cIm1vcmVcIlxzKlwvPi9pIiwgJzwhLS1tb3JlLS0+JywgJF9QT1NUWydDb250ZW50J10pOw0KDQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJ0ludHJvJ10pKSB7DQogICAgICAgICAgICBpZiAoc3RyaXBvcygkX1BPU1RbJ0NvbnRlbnQnXSwgJzwhLS1tb3JlLS0+JykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gR2V0VmFsdWVJbkFycmF5KGV4cGxvZGUoJzwhLS1tb3JlLS0+JywgJF9QT1NUWydDb250ZW50J10pLCAwKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICh0cmltKCRfUE9TVFsnSW50cm8nXSkgPT0gJycgfHwgKHN0cmlwb3MoJF9QT1NUWydJbnRybyddLCAnPCEtLWF1dG9pbnRyby0tPicpICE9PSBmYWxzZSkpIHsNCiAgICAgICAgICAgICAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19BUlRJQ0xFX0lOVFJPX1dJVEhfVEVYVCddID09IHRydWUpIHsNCiAgICAgICAgICAgICAgICAgICAgLy/mlLnnuq9IVE1M5pGY6KaBDQogICAgICAgICAgICAgICAgICAgICRpID0gKGludCkgJHpicC0+b3B0aW9uWydaQ19BUlRJQ0xFX0VYQ0VSUFRfTUFYJ107DQogICAgICAgICAgICAgICAgICAgICRfUE9TVFsnSW50cm8nXSA9IEZvcm1hdFN0cmluZygkX1BPU1RbJ0NvbnRlbnQnXSwgIltub2h0bWxdIik7DQogICAgICAgICAgICAgICAgICAgICRfUE9TVFsnSW50cm8nXSA9IFN1YlN0clVURjhfSHRtbCgkX1BPU1RbJ0ludHJvJ10sICRpKTsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAkaSA9IChpbnQpICR6YnAtPm9wdGlvblsnWkNfQVJUSUNMRV9FWENFUlBUX01BWCddOw0KICAgICAgICAgICAgICAgICAgICBpZiAoWmJwX1N0ckxlbigkX1BPU1RbJ0NvbnRlbnQnXSkgPiAkaSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGkgPSAoaW50KSBaYnBfU3RycG9zKCRfUE9TVFsnQ29udGVudCddLCAnPicsICRpKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoJGkgPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGkgPSAoaW50KSBaYnBfU3RyTGVuKCRfUE9TVFsnQ29udGVudCddKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICBpZiAoJGkgPCAkemJwLT5vcHRpb25bJ1pDX0FSVElDTEVfRVhDRVJQVF9NQVgnXSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgJGkgPSAoaW50KSAkemJwLT5vcHRpb25bJ1pDX0FSVElDTEVfRVhDRVJQVF9NQVgnXTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAkX1BPU1RbJ0ludHJvJ10gPSBTdWJTdHJVVEY4X0h0bWwoJF9QT1NUWydDb250ZW50J10sICRpKTsNCiAgICAgICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gQ2xvc2VUYWdzKCRfUE9TVFsnSW50cm8nXSk7DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddIC49ICc8IS0tYXV0b2ludHJvLS0+JzsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfQVJUSUNMRV9JTlRST19XSVRIX1RFWFQnXSA9PSB0cnVlKSB7DQogICAgICAgICAgICAgICAgICAgIC8v5pS557qvSFRNTOaRmOimgQ0KICAgICAgICAgICAgICAgICAgICAkX1BPU1RbJ0ludHJvJ10gPSBGb3JtYXRTdHJpbmcoJF9QT1NUWydJbnRybyddLCAiW25vaHRtbF0iKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgJF9QT1NUWydJbnRybyddID0gQ2xvc2VUYWdzKCRfUE9TVFsnSW50cm8nXSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnQXV0aG9ySUQnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKCgkX1BPU1RbJ0F1dGhvcklEJ10gIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSkpIHsNCiAgICAgICAgICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICAgICB9DQogICAgICAgIGlmIChlbXB0eSgkX1BPU1RbJ0F1dGhvcklEJ10pKSB7DQogICAgICAgICAgICAkX1BPU1RbJ0F1dGhvcklEJ10gPSAkemJwLT51c2VyLT5JRDsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0FsaWFzJ10pKSB7DQogICAgICAgICRfUE9TVFsnQWxpYXMnXSA9IEZvcm1hdFN0cmluZygkX1BPU1RbJ0FsaWFzJ10sICdbbm9zY3JpcHRdJyk7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnUG9zdFRpbWUnXSkpIHsNCiAgICAgICAgJF9QT1NUWydQb3N0VGltZSddID0gc3RydG90aW1lKCRfUE9TVFsnUG9zdFRpbWUnXSk7DQogICAgfQ0KDQogICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpKSB7DQogICAgICAgIHVuc2V0KCRfUE9TVFsnSXNUb3AnXSk7DQogICAgfQ0KDQogICAgJGFydGljbGUgPSBuZXcgUG9zdCgpOw0KICAgICRwcmVfYXV0aG9yID0gbnVsbDsNCiAgICAkcHJlX3RhZyA9IG51bGw7DQogICAgJHByZV9jYXRlZ29yeSA9IG51bGw7DQogICAgJHByZV9pc3RvcCA9IG51bGw7DQogICAgJHByZV9zdGF0dXMgPSBudWxsOw0KICAgICRvcmlnX2lkID0gMDsNCg0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlTmV3JykpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVQdWInKSkgew0KICAgICAgICAgICAgJF9QT1NUWydTdGF0dXMnXSA9IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFydGljbGUgPSAkemJwLT5HZXRQb3N0QnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgICAgICBpZiAoJGFydGljbGUtPklEID09IDApIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig5LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVFZHQnKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCgkYXJ0aWNsZS0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJ0FydGljbGVBbGwnKSkpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICgoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlUHViJykpICYmICgkYXJ0aWNsZS0+U3RhdHVzID09IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HKSkgew0KICAgICAgICAgICAgJF9QT1NUWydTdGF0dXMnXSA9IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HOw0KICAgICAgICB9DQogICAgICAgICRvcmlnX2lkID0gJGFydGljbGUtPklEOw0KICAgICAgICAkcHJlX2F1dGhvciA9ICRhcnRpY2xlLT5BdXRob3JJRDsNCiAgICAgICAgJHByZV90YWcgPSAkYXJ0aWNsZS0+VGFnOw0KICAgICAgICAkcHJlX2NhdGVnb3J5ID0gJGFydGljbGUtPkNhdGVJRDsNCiAgICAgICAgJHByZV9pc3RvcCA9ICRhcnRpY2xlLT5Jc1RvcDsNCiAgICAgICAgJHByZV9zdGF0dXMgPSAkYXJ0aWNsZS0+U3RhdHVzOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydQb3N0J10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFska2V5XSkpIHsNCiAgICAgICAgICAgICRhcnRpY2xlLT4ka2V5ID0gR2V0VmFycygka2V5LCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJGFydGljbGUtPlR5cGUgPSBaQ19QT1NUX1RZUEVfQVJUSUNMRTsNCg0KICAgICRhcnRpY2xlLT5VcGRhdGVUaW1lID0gdGltZSgpOw0KDQogICAgRmlsdGVyTWV0YSgkYXJ0aWNsZSk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0QXJ0aWNsZV9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGFydGljbGUpOw0KICAgIH0NCg0KICAgIEZpbHRlclBvc3QoJGFydGljbGUpOw0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfTEFSR0VfREFUQSddID09IGZhbHNlKSB7DQogICAgICAgIC8vQ291bnRQb3N0QXJyYXkoYXJyYXkoJHBvc3QtPklEKSk7DQogICAgICAgIENvdW50UG9zdCgkYXJ0aWNsZSwgbnVsbCk7DQogICAgfQ0KDQogICAgJGFydGljbGUtPlNhdmUoKTsNCiAgICAkemJwLT5BZGRDYWNoZSgkYXJ0aWNsZSk7DQoNCiAgICAvL+abtOaWsOe7n+iuoeS/oeaBrw0KICAgICRwcmVfYXJyYXlUYWcgPSAkemJwLT5Mb2FkVGFnc0J5SURTdHJpbmcoJHByZV90YWcpOw0KICAgICRub3dfYXJyYXlUYWcgPSAkemJwLT5Mb2FkVGFnc0J5SURTdHJpbmcoJGFydGljbGUtPlRhZyk7DQogICAgJHByZV9hcnJheSA9ICRub3dfYXJyYXkgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRwcmVfYXJyYXlUYWcgYXMgJHRhZykgew0KICAgICAgICAkcHJlX2FycmF5W10gPSAkdGFnLT5JRDsNCiAgICB9DQogICAgZm9yZWFjaCAoJG5vd19hcnJheVRhZyBhcyAkdGFnKSB7DQogICAgICAgICRub3dfYXJyYXlbXSA9ICR0YWctPklEOw0KICAgIH0NCiAgICAkZGVsX2FycmF5ID0gYXJyYXlfZGlmZigkcHJlX2FycmF5LCAkbm93X2FycmF5KTsNCiAgICAkYWRkX2FycmF5ID0gYXJyYXlfZGlmZigkbm93X2FycmF5LCAkcHJlX2FycmF5KTsNCiAgICAkZGVsX3N0cmluZyA9ICR6YnAtPkNvbnZlcnRUYWdJRHRvU3RyaW5nKCRkZWxfYXJyYXkpOw0KICAgICRhZGRfc3RyaW5nID0gJHpicC0+Q29udmVydFRhZ0lEdG9TdHJpbmcoJGFkZF9hcnJheSk7DQogICAgaWYgKCRkZWxfc3RyaW5nKSB7DQogICAgICAgIENvdW50VGFnQXJyYXlTdHJpbmcoJGRlbF9zdHJpbmcsIC0xLCAkYXJ0aWNsZS0+SUQpOw0KICAgIH0NCiAgICBpZiAoJGFkZF9zdHJpbmcpIHsNCiAgICAgICAgQ291bnRUYWdBcnJheVN0cmluZygkYWRkX3N0cmluZywgKzEsICRhcnRpY2xlLT5JRCk7DQogICAgfQ0KICAgIGlmICgkcHJlX2F1dGhvciAhPSAkYXJ0aWNsZS0+QXV0aG9ySUQpIHsNCiAgICAgICAgaWYgKCRwcmVfYXV0aG9yID4gMCkgew0KICAgICAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkcHJlX2F1dGhvciksIGFycmF5KC0xLCAwLCAwLCAwKSk7DQogICAgICAgIH0NCg0KICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCRhcnRpY2xlLT5BdXRob3JJRCksIGFycmF5KCsxLCAwLCAwLCAwKSk7DQogICAgfQ0KICAgIGlmICgkcHJlX2NhdGVnb3J5ICE9ICRhcnRpY2xlLT5DYXRlSUQpIHsNCiAgICAgICAgaWYgKCRwcmVfY2F0ZWdvcnkgPiAwKSB7DQogICAgICAgICAgICBDb3VudENhdGVnb3J5QXJyYXkoYXJyYXkoJHByZV9jYXRlZ29yeSksIC0xKTsNCiAgICAgICAgfQ0KDQogICAgICAgIENvdW50Q2F0ZWdvcnlBcnJheShhcnJheSgkYXJ0aWNsZS0+Q2F0ZUlEKSwgKzEpOw0KICAgIH0NCiAgICBpZiAoJG9yaWdfaWQgPT0gMCAmJiAkYXJ0aWNsZS0+SXNUb3AgPT0gMCAmJiAkYXJ0aWNsZS0+U3RhdHVzID09IFpDX1BPU1RfU1RBVFVTX1BVQkxJQykgew0KICAgICAgICBDb3VudE5vcm1hbEFydGljbGVOdW1zKCsxKTsNCiAgICB9IGVsc2VpZiAoJG9yaWdfaWQgPiAwKSB7DQogICAgICAgIGlmICgoJHByZV9pc3RvcCA9PSAwICYmICRwcmVfc3RhdHVzID09IDApICYmICgkYXJ0aWNsZS0+SXNUb3AgIT0gMCB8fCAkYXJ0aWNsZS0+U3RhdHVzICE9IDApKSB7DQogICAgICAgICAgICBDb3VudE5vcm1hbEFydGljbGVOdW1zKC0xKTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoKCRwcmVfaXN0b3AgIT0gMCB8fCAkcHJlX3N0YXR1cyAhPSAwKSAmJiAoJGFydGljbGUtPklzVG9wID09IDAgJiYgJGFydGljbGUtPlN0YXR1cyA9PSAwKSkgew0KICAgICAgICAgICAgQ291bnROb3JtYWxBcnRpY2xlTnVtcygrMSk7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKCRhcnRpY2xlLT5Jc1RvcCA9PSB0cnVlICYmICRhcnRpY2xlLT5TdGF0dXMgPT0gWkNfUE9TVF9TVEFUVVNfUFVCTElDKSB7DQogICAgICAgIENvdW50VG9wUG9zdCgkYXJ0aWNsZS0+VHlwZSwgJGFydGljbGUtPklELCBudWxsKTsNCiAgICB9IGVsc2Ugew0KICAgICAgICBDb3VudFRvcFBvc3QoJGFydGljbGUtPlR5cGUsIG51bGwsICRhcnRpY2xlLT5JRCk7DQogICAgfQ0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3ByZXZpb3VzJyk7DQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NhbGVuZGFyJyk7DQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3RhZ3MnKTsNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnYXV0aG9ycycpOw0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdhcmNoaXZlcycpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdEFydGljbGVfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICByZXR1cm4gJGFydGljbGU7DQp9DQoNCi8qKg0KICog5Yig6Zmk5paH56ugLg0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbEFydGljbGUoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnKTsNCg0KICAgICRhcnRpY2xlID0gJHpicC0+R2V0UG9zdEJ5SUQoJGlkKTsNCiAgICBpZiAoJGFydGljbGUtPklEID4gMCkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdBcnRpY2xlRGVsJykpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnQXJ0aWNsZUFsbCcpICYmICRhcnRpY2xlLT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCg0KICAgICAgICAkcHJlX2F1dGhvciA9ICRhcnRpY2xlLT5BdXRob3JJRDsNCiAgICAgICAgJHByZV90YWcgPSAkYXJ0aWNsZS0+VGFnOw0KICAgICAgICAkcHJlX2NhdGVnb3J5ID0gJGFydGljbGUtPkNhdGVJRDsNCiAgICAgICAgJHByZV9pc3RvcCA9ICRhcnRpY2xlLT5Jc1RvcDsNCiAgICAgICAgJHByZV9zdGF0dXMgPSAkYXJ0aWNsZS0+U3RhdHVzOw0KDQogICAgICAgICRhcnRpY2xlLT5EZWwoKTsNCg0KICAgICAgICBEZWxBcnRpY2xlX0NvbW1lbnRzKCRhcnRpY2xlLT5JRCk7DQoNCiAgICAgICAgQ291bnRUYWdBcnJheVN0cmluZygkcHJlX3RhZywgLTEsICRhcnRpY2xlLT5JRCk7DQogICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgtMSwgMCwgMCwgMCkpOw0KICAgICAgICBDb3VudENhdGVnb3J5QXJyYXkoYXJyYXkoJHByZV9jYXRlZ29yeSksIC0xKTsNCiAgICAgICAgaWYgKCgkcHJlX2lzdG9wID09IDAgJiYgJHByZV9zdGF0dXMgPT0gMCkpIHsNCiAgICAgICAgICAgIENvdW50Tm9ybWFsQXJ0aWNsZU51bXMoLTEpOw0KICAgICAgICB9DQogICAgICAgIGlmICgkYXJ0aWNsZS0+SXNUb3AgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgQ291bnRUb3BQb3N0KCRhcnRpY2xlLT5UeXBlLCBudWxsLCAkYXJ0aWNsZS0+SUQpOw0KICAgICAgICB9DQoNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3ByZXZpb3VzJyk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjYWxlbmRhcicpOw0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY29tbWVudHMnKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ3RhZ3MnKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2F1dGhvcnMnKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2FyY2hpdmVzJyk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsQXJ0aWNsZV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCg0KICAgIHJldHVybiBmYWxzZTsNCn0NCg0KLyoqDQogKiDmj5DkuqTmlofnq6DmlbDmja7ml7bmo4Dmn6V0YWfmlbDmja7vvIzlubblsIbmlrB0YWdz6L2s5Li65qCH5YeG5qC85byP6L+U5ZueLg0KICoNCiAqIEBwYXJhbSBzdHJpbmcgJHRhZ25hbWVzdHJpbmcg5o+Q5Lqk55qE5paH56ugdGFn5pWw5o2u77yM5Y+v5LulOizvvIzjgIHnrYnnrKblj7fliIbpmpQNCiAqDQogKiBAcmV0dXJuIHN0cmluZyDov5Tlm57lpoInezF9ezJ9ezN9ezR9J+eahOWtl+espuS4sg0KICovDQpmdW5jdGlvbiBQb3N0QXJ0aWNsZV9DaGVja1RhZ0FuZENvbnZlcnRJRHRvU3RyaW5nKCR0YWduYW1lc3RyaW5nLCAkcG9zdF90eXBlID0gMCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICAkcyA9ICcnOw0KICAgICR0YWduYW1lc3RyaW5nID0gc3RyX3JlcGxhY2UoYXJyYXkoJzsnLCAn77yMJywgJ+OAgScpLCAnLCcsICR0YWduYW1lc3RyaW5nKTsNCiAgICAkdGFnbmFtZXN0cmluZyA9IHN0cmlwX3RhZ3MoJHRhZ25hbWVzdHJpbmcpOw0KICAgICR0YWduYW1lc3RyaW5nID0gdHJpbSgkdGFnbmFtZXN0cmluZyk7DQogICAgaWYgKCR0YWduYW1lc3RyaW5nID09ICcnKSB7DQogICAgICAgIHJldHVybiAnJzsNCiAgICB9DQoNCiAgICBpZiAoJHRhZ25hbWVzdHJpbmcgPT0gJywnKSB7DQogICAgICAgIHJldHVybiAnJzsNCiAgICB9DQoNCiAgICAkYSA9IGV4cGxvZGUoJywnLCAkdGFnbmFtZXN0cmluZyk7DQogICAgJGIgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRhIGFzICR2YWx1ZSkgew0KICAgICAgICAkdiA9IHRyaW0oJHZhbHVlKTsNCiAgICAgICAgaWYgKCR2KSB7DQogICAgICAgICAgICAkYltdID0gJHY7DQogICAgICAgIH0NCiAgICB9DQogICAgJGIgPSBhcnJheV91bmlxdWUoJGIpOw0KICAgICRiID0gYXJyYXlfc2xpY2UoJGIsIDAsIDIwKTsNCiAgICAkYyA9IGFycmF5KCk7DQoNCiAgICAkdCA9ICR6YnAtPkxvYWRUYWdzQnlOYW1lU3RyaW5nKCR0YWduYW1lc3RyaW5nLCAkcG9zdF90eXBlKTsNCiAgICBmb3JlYWNoICgkdCBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICAkY1tdID0gJGtleTsNCiAgICB9DQoNCiAgICAkZCA9IGFycmF5X2RpZmYoJGIsICRjKTsNCiAgICBpZiAoJHpicC0+Q2hlY2tSaWdodHMoJ1RhZ05ldycpICYmICR6YnAtPkNoZWNrUmlnaHRzKCdUYWdQc3QnKSkgew0KICAgICAgICBmb3JlYWNoICgkZCBhcyAka2V5KSB7DQogICAgICAgICAgICAkdGFnID0gbmV3IFRhZygpOw0KICAgICAgICAgICAgJHRhZy0+TmFtZSA9ICRrZXk7DQogICAgICAgICAgICAkdGFnLT5UeXBlID0gJHBvc3RfdHlwZTsNCg0KICAgICAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFRhZ19Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAgICAgJGZwbmFtZSgkdGFnKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgRmlsdGVyVGFnKCR0YWcpOw0KICAgICAgICAgICAgJHRhZy0+U2F2ZSgpOw0KICAgICAgICAgICAgJHpicC0+QWRkQ2FjaGUoJHRhZyk7DQogICAgICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgndGFncycpOw0KDQogICAgICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0VGFnX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICAgICAkZnBuYW1lKCR0YWcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJGIgYXMgJGtleSkgew0KICAgICAgICBpZiAoIWlzc2V0KCR6YnAtPnRhZ3NieW5hbWVfdHlwZVskcG9zdF90eXBlXVska2V5XSkpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgJHMgLj0gJ3snIC4gJHpicC0+dGFnc2J5bmFtZV90eXBlWyRwb3N0X3R5cGVdWyRrZXldLT5JRCAuICd9JzsNCiAgICB9DQoNCiAgICByZXR1cm4gJHM7DQp9DQoNCi8qKg0KICog5Yig6Zmk5paH56ug5LiL5omA5pyJ6K+E6K66Lg0KICoNCiAqIEBwYXJhbSBpbnQgJGlkIOaWh+eroElEDQogKi8NCmZ1bmN0aW9uIERlbEFydGljbGVfQ29tbWVudHMoJGlkKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHNxbCA9ICR6YnAtPmRiLT5zcWwtPkRlbGV0ZSgkemJwLT50YWJsZVsnQ29tbWVudCddLCBhcnJheShhcnJheSgnPScsICdjb21tX0xvZ0lEJywgJGlkKSkpOw0KICAgICR6YnAtPmRiLT5EZWxldGUoJHNxbCk7DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCi8qKg0KICog5o+Q5Lqk6aG16Z2i5pWw5o2uLg0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBQb3N0fGZhbHNlDQogKi8NCmZ1bmN0aW9uIFBvc3RQYWdlKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnSUQnXSkpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ1Bvc3RUaW1lJ10pKSB7DQogICAgICAgICRfUE9TVFsnUG9zdFRpbWUnXSA9IHN0cnRvdGltZSgkX1BPU1RbJ1Bvc3RUaW1lJ10pOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJF9QT1NUWydBdXRob3JJRCddKSkgew0KICAgICAgICAkX1BPU1RbJ0F1dGhvcklEJ10gPSAkemJwLT51c2VyLT5JRDsNCiAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoKCRfUE9TVFsnQXV0aG9ySUQnXSAhPSAkemJwLT51c2VyLT5JRCkgJiYgKCEkemJwLT5DaGVja1JpZ2h0cygnUGFnZUFsbCcpKSkgew0KICAgICAgICAgICAgJF9QT1NUWydBdXRob3JJRCddID0gJHpicC0+dXNlci0+SUQ7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJF9QT1NUWydBbGlhcyddKSkgew0KICAgICAgICAkX1BPU1RbJ0FsaWFzJ10gPSBGb3JtYXRTdHJpbmcoJF9QT1NUWydBbGlhcyddLCAnW25vc2NyaXB0XScpOw0KICAgIH0NCg0KICAgICRhcnRpY2xlID0gbmV3IFBvc3QoKTsNCiAgICAkcHJlX2F1dGhvciA9IG51bGw7DQogICAgJG9yaWdfaWQgPSAwOw0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdQYWdlTmV3JykpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VQdWInKSkgew0KICAgICAgICAgICAgJF9QT1NUWydTdGF0dXMnXSA9IFpDX1BPU1RfU1RBVFVTX0FVRElUSU5HOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFydGljbGUgPSAkemJwLT5HZXRQb3N0QnlJRChHZXRWYXJzKCdJRCcsICdQT1NUJykpOw0KICAgICAgICBpZiAoJGFydGljbGUtPklEID09IDApIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig5LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VFZHQnKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VQdWInKSkgJiYgKCRhcnRpY2xlLT5TdGF0dXMgPT0gWkNfUE9TVF9TVEFUVVNfQVVESVRJTkcpKSB7DQogICAgICAgICAgICAkX1BPU1RbJ1N0YXR1cyddID0gWkNfUE9TVF9TVEFUVVNfQVVESVRJTkc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCgkYXJ0aWNsZS0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpICYmICghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VBbGwnKSkpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgICAgICRwcmVfYXV0aG9yID0gJGFydGljbGUtPkF1dGhvcklEOw0KICAgICAgICAkb3JpZ19pZCA9ICRhcnRpY2xlLT5JRDsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkemJwLT5kYXRhaW5mb1snUG9zdCddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGtleV0pKSB7DQogICAgICAgICAgICAkYXJ0aWNsZS0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRhcnRpY2xlLT5UeXBlID0gWkNfUE9TVF9UWVBFX1BBR0U7DQoNCiAgICBGaWx0ZXJNZXRhKCRhcnRpY2xlKTsNCg0KICAgICRhcnRpY2xlLT5VcGRhdGVUaW1lID0gdGltZSgpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFBhZ2VfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRhcnRpY2xlKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJQb3N0KCRhcnRpY2xlKTsNCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0xBUkdFX0RBVEEnXSA9PSBmYWxzZSkgew0KICAgICAgICAvL0NvdW50UG9zdEFycmF5KGFycmF5KCRwb3N0LT5JRCkpOw0KICAgICAgICBDb3VudFBvc3QoJGFydGljbGUsIG51bGwpOw0KICAgIH0NCg0KICAgICRhcnRpY2xlLT5TYXZlKCk7DQoNCiAgICBpZiAoJHByZV9hdXRob3IgIT0gJGFydGljbGUtPkF1dGhvcklEKSB7DQogICAgICAgIGlmICgkcHJlX2F1dGhvciA+IDApIHsNCiAgICAgICAgICAgIENvdW50TWVtYmVyQXJyYXkoYXJyYXkoJHByZV9hdXRob3IpLCBhcnJheSgwLCAtMSwgMCwgMCkpOw0KICAgICAgICB9DQoNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkYXJ0aWNsZS0+QXV0aG9ySUQpLCBhcnJheSgwLCArMSwgMCwgMCkpOw0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KDQogICAgaWYgKEdldFZhcnMoJ0FkZE5hdmJhcicsICdQT1NUJykgPT09ICcwJykgew0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ3BhZ2UnLCAkYXJ0aWNsZS0+SUQpOw0KICAgIH0NCg0KICAgIGlmIChHZXRWYXJzKCdBZGROYXZiYXInLCAnUE9TVCcpID09PSAnMScpIHsNCiAgICAgICAgJHpicC0+QWRkSXRlbVRvTmF2YmFyKCdwYWdlJywgJGFydGljbGUtPklELCAkYXJ0aWNsZS0+VGl0bGUsICRhcnRpY2xlLT5VcmwpOw0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RQYWdlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkYXJ0aWNsZSk7DQogICAgfQ0KDQogICAgcmV0dXJuICRhcnRpY2xlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOmhtemdoi4NCiAqDQogKiBAdGhyb3dzIEV4Y2VwdGlvbg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxQYWdlKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJyk7DQoNCiAgICAkYXJ0aWNsZSA9ICR6YnAtPkdldFBvc3RCeUlEKCRpZCk7DQogICAgaWYgKCRhcnRpY2xlLT5JRCA+IDApIHsNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnUGFnZURlbCcpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1BhZ2VBbGwnKSAmJiAkYXJ0aWNsZS0+QXV0aG9ySUQgIT0gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQoNCiAgICAgICAgJHByZV9hdXRob3IgPSAkYXJ0aWNsZS0+QXV0aG9ySUQ7DQoNCiAgICAgICAgJGFydGljbGUtPkRlbCgpOw0KDQogICAgICAgIERlbEFydGljbGVfQ29tbWVudHMoJGFydGljbGUtPklEKTsNCg0KICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCRwcmVfYXV0aG9yKSwgYXJyYXkoMCwgLTEsIDAsIDApKTsNCg0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY29tbWVudHMnKTsNCg0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ3BhZ2UnLCAkYXJ0aWNsZS0+SUQpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbFBhZ2VfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkYXJ0aWNsZSk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDmibnph4/liKDpmaRQb3N0Lg0KICoNCiAqIEBwYXJhbSAkdHlwZQ0KICovDQpmdW5jdGlvbiBCYXRjaFBvc3QoJHR5cGUpDQp7DQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fQmF0Y2hQb3N0J10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcHJldHVybiA9ICRmcG5hbWUoJHR5cGUpOw0KICAgIH0NCn0NCg0KLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KLyoqDQogKiDmj5DkuqTor4TorrouDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIENvbW1lbnR8ZmFsc2UNCiAqLw0KZnVuY3Rpb24gUG9zdENvbW1lbnQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlzQWpheCA9IEdldFZhcnMoJ2lzYWpheCcsICdQT1NUJyk7DQogICAgJHJldHVybkpzb24gPSBHZXRWYXJzKCdmb3JtYXQnLCAnUE9TVCcpID09ICdqc29uJzsNCiAgICAkcmV0dXJuQ29tbWVudFdoaXRlTGlzdCA9IGFycmF5KA0KICAgICAgICAnSUQnICAgICAgID0+IG51bGwsDQogICAgICAgICdDb250ZW50JyAgPT4gbnVsbCwNCiAgICAgICAgJ0xvZ0lkJyAgICA9PiBudWxsLA0KICAgICAgICAnTmFtZScgICAgID0+IG51bGwsDQogICAgICAgICdQYXJlbnRJRCcgPT4gbnVsbCwNCiAgICAgICAgJ1Bvc3RUaW1lJyA9PiBudWxsLA0KICAgICAgICAnSG9tZVBhZ2UnID0+IG51bGwsDQogICAgICAgICdFbWFpbCcgICAgPT4gbnVsbCwNCiAgICAgICAgJ0F1dGhvcklEJyA9PiBudWxsLA0KICAgICk7DQoNCiAgICBpZiAoaXNzZXQoJF9HRVRbJ3Bvc3RpZCddKSkgew0KICAgICAgICAkX1BPU1RbJ0xvZ0lEJ10gPSAkX0dFVFsncG9zdGlkJ107DQogICAgfSBlbHNlaWYgKGlzc2V0KCRfUE9TVFsncG9zdGlkJ10pKSB7DQogICAgICAgICRfUE9TVFsnTG9nSUQnXSA9ICRfUE9TVFsncG9zdGlkJ107DQogICAgfSBlbHNlaWYgKCFpc3NldCgkX1BPU1RbJ0xvZ0lEJ10pKSB7DQogICAgICAgICRfUE9TVFsnTG9nSUQnXSA9IDA7DQogICAgfQ0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9UVVJOT0ZGJ10pIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDQwLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0NPTU1FTlRfVkFMSURDTVRLRVlfRU5BQkxFJ10pIHsNCiAgICAgICAgaWYgKCR6YnAtPlZhbGlkQ210S2V5KCRfUE9TVFsnTG9nSUQnXSwgJF9HRVRbJ2tleSddKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDQzLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfQ09NTUVOVF9WRVJJRllfRU5BQkxFJ10pIHsNCiAgICAgICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnTm9WYWxpZENvZGUnKSkgew0KICAgICAgICAgICAgaWYgKCR6YnAtPkNoZWNrVmFsaWRDb2RlKCRfUE9TVFsndmVyaWZ5J10sICdjbXQnKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcigzOCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRwb3N0X25hbWUgPSBpc3NldCgkX1BPU1RbJ25hbWUnXSkgPyBHZXRWYXJzKCduYW1lJywgJ1BPU1QnKSA6IEdldFZhcnMoJ05hbWUnLCAnUE9TVCcpOw0KICAgICRwb3N0X3JlcGx5aWQgPSBpc3NldCgkX1BPU1RbJ3JlcGx5aWQnXSkgPyBHZXRWYXJzKCdyZXBseWlkJywgJ1BPU1QnKSA6IEdldFZhcnMoJ1JlcGx5SUQnLCAnUE9TVCcpOw0KICAgICRwb3N0X2VtYWlsID0gaXNzZXQoJF9QT1NUWydlbWFpbCddKSA/IEdldFZhcnMoJ2VtYWlsJywgJ1BPU1QnKSA6IEdldFZhcnMoJ0VtYWlsJywgJ1BPU1QnKTsNCiAgICAkcG9zdF9ob21lcGFnZSA9IGlzc2V0KCRfUE9TVFsnaG9tZXBhZ2UnXSkgPyBHZXRWYXJzKCdob21lcGFnZScsICdQT1NUJykgOiBHZXRWYXJzKCdIb21lUGFnZScsICdQT1NUJyk7DQogICAgJHBvc3RfY29udGVudCA9IGlzc2V0KCRfUE9TVFsnY29udGVudCddKSA/IEdldFZhcnMoJ2NvbnRlbnQnLCAnUE9TVCcpIDogR2V0VmFycygnQ29udGVudCcsICdQT1NUJyk7DQoNCiAgICAvL+WIpOaWreaYr+S4jeaYr+acieWQjOWQjeeahOeUqOaItw0KICAgICRtID0gJHpicC0+R2V0TWVtYmVyQnlOYW1lKCRwb3N0X25hbWUpOw0KICAgIGlmICgkbS0+SUQgPiAwKSB7DQogICAgICAgIGlmICgkbS0+SUQgIT0gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcigzMSwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRyZXBseWlkID0gKGludCkgJHBvc3RfcmVwbHlpZDsNCg0KICAgIGlmICgkcmVwbHlpZCA9PSAwKSB7DQogICAgICAgICRfUE9TVFsnUm9vdElEJ10gPSAwOw0KICAgICAgICAkX1BPU1RbJ1BhcmVudElEJ10gPSAwOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRfUE9TVFsnUGFyZW50SUQnXSA9ICRyZXBseWlkOw0KICAgICAgICAkYyA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCRyZXBseWlkKTsNCiAgICAgICAgaWYgKCRjLT5MZXZlbCA+ICgkemJwLT5jb21tZW50X3JlY3Vyc2lvbl9sZXZlbCAtIDIpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNTIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgJF9QT1NUWydSb290SUQnXSA9IENvbW1lbnQ6OkdldFJvb3RJRCgkYy0+SUQpOw0KICAgIH0NCg0KICAgICRfUE9TVFsnQXV0aG9ySUQnXSA9ICR6YnAtPnVzZXItPklEOw0KICAgICRfUE9TVFsnTmFtZSddID0gJHBvc3RfbmFtZTsNCiAgICAkX1BPU1RbJ0VtYWlsJ10gPSAkcG9zdF9lbWFpbDsNCiAgICAkX1BPU1RbJ0hvbWVQYWdlJ10gPSAkcG9zdF9ob21lcGFnZTsNCiAgICAkX1BPU1RbJ0NvbnRlbnQnXSA9ICRwb3N0X2NvbnRlbnQ7DQogICAgJF9QT1NUWydQb3N0VGltZSddID0gdGltZSgpOw0KICAgICRfUE9TVFsnSVAnXSA9IEdldEd1ZXN0SVAoKTsNCiAgICAkX1BPU1RbJ0FnZW50J10gPSBHZXRHdWVzdEFnZW50KCk7DQoNCiAgICBpZiAoJHpicC0+dXNlci0+SUQgPiAwKSB7DQogICAgICAgICRfUE9TVFsnTmFtZSddID0gJHpicC0+dXNlci0+TmFtZTsNCiAgICB9DQoNCiAgICAkY210ID0gbmV3IENvbW1lbnQoKTsNCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydDb21tZW50J10gYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lEJyB8fCAka2V5ID09ICdNZXRhJykgew0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRrZXkgPT0gJ0lzQ2hlY2tpbmcnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGtleV0pKSB7DQogICAgICAgICAgICAkY210LT4ka2V5ID0gR2V0VmFycygka2V5LCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy/liKTmlq3mlofnq6Dooajph4xJROaYr+WQpuWtmOWcqA0KICAgICRwb3N0ID0gJHpicC0+R2V0UG9zdEJ5SUQoJGNtdC0+TG9nSUQpOw0KICAgIGlmIChlbXB0eSgkcG9zdC0+SUQpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcigyLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KDQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoJHpicC0+b3B0aW9uWydaQ19DT01NRU5UX0FVRElUJ10gJiYgISR6YnAtPkNoZWNrUmlnaHRzKCdyb290JykpIHsNCiAgICAgICAgJGNtdC0+SXNDaGVja2luZyA9IHRydWU7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdENvbW1lbnRfQ29yZSddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRjbXQpOw0KICAgIH0NCg0KICAgIEZpbHRlckNvbW1lbnQoJGNtdCk7DQoNCiAgICBpZiAoJGNtdC0+SXNUaHJvdykgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoMTQsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgICRjbXQtPlNhdmUoKTsNCiAgICAkemJwLT5BZGRDYWNoZSgkY210KTsNCg0KICAgIGlmICgkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgKzEpOw0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNTMsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgKzEpOw0KICAgIENvdW50Q29tbWVudE51bXMoKzEsIDApOw0KICAgIGlmICgkemJwLT51c2VyLT5JRCA+IDApIHsNCiAgICAgICAgQ291bnRNZW1iZXIoJHpicC0+dXNlciwgYXJyYXkoMCwgMCwgMSwgMCkpOw0KICAgICAgICAkemJwLT51c2VyLT5TYXZlKCk7DQogICAgfQ0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQoNCiAgICBpZiAoJGlzQWpheCkgew0KICAgICAgICBWaWV3Q29tbWVudCgkY210LT5JRCk7DQogICAgfSBlbHNlaWYgKCRyZXR1cm5Kc29uKSB7DQogICAgICAgIG9iX2NsZWFuKCk7DQogICAgICAgIFZpZXdDb21tZW50KCRjbXQtPklEKTsNCiAgICAgICAgJGNvbW1lbnRIdG1sID0gb2JfZ2V0X2NsZWFuKCk7DQogICAgICAgIEpzb25SZXR1cm4oDQogICAgICAgICAgICBhcnJheV9tZXJnZV9yZWN1cnNpdmUoDQogICAgICAgICAgICAgICAgYXJyYXkoDQogICAgICAgICAgICAgICAgICAgICJodG1sIiA9PiAkY29tbWVudEh0bWwsDQogICAgICAgICAgICAgICAgKSwNCiAgICAgICAgICAgICAgICBhcnJheV9pbnRlcnNlY3Rfa2V5KCRjbXQtPkdldERhdGEoKSwgJHJldHVybkNvbW1lbnRXaGl0ZUxpc3QpDQogICAgICAgICAgICApDQogICAgICAgICk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdENvbW1lbnRfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRjbXQpOw0KICAgIH0NCg0KICAgIHJldHVybiAkY210Ow0KfQ0KDQovKioNCiAqIOWIoOmZpOivhOiuui4NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsQ29tbWVudCgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkaWQgPSAoaW50KSBHZXRWYXJzKCdpZCcsICdHRVQnKTsNCiAgICAkY210ID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJGlkKTsNCg0KICAgIGlmICgkemJwLT5DaGVja1JpZ2h0cygnQ29tbWVudEFsbCcpID09IGZhbHNlKSB7DQogICAgICAgIGlmICgkY210LT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCAmJiAkY210LT5Qb3N0LT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKCRjbXQtPklEID4gMCkgew0KICAgICAgICAkY29tbWVudHMgPSAkemJwLT5HZXRDb21tZW50TGlzdCgnKicsIGFycmF5KGFycmF5KCc9JywgJ2NvbW1fTG9nSUQnLCAkY210LT5Mb2dJRCkpLCBudWxsLCBudWxsLCBudWxsKTsNCg0KICAgICAgICBEZWxDb21tZW50X0NoaWxkcmVuKCRjbXQtPklEKTsNCg0KICAgICAgICBpZiAoJGNtdC0+SXNDaGVja2luZyA9PSBmYWxzZSkgew0KICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygtMSwgMCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKC0xLCAtMSk7DQogICAgICAgIH0NCiAgICAgICAgJGNtdC0+RGVsKCk7DQoNCiAgICAgICAgaWYgKCRjbXQtPklzQ2hlY2tpbmcgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgLTEpOw0KICAgICAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEID4gMCkgew0KICAgICAgICAgICAgICAgIENvdW50TWVtYmVyKCRjbXQtPkF1dGhvciwgYXJyYXkoMCwgMCwgLTEsIDApKTsNCiAgICAgICAgICAgICAgICAkY210LT5BdXRob3ItPlNhdmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KDQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbENvbW1lbnRfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOivhOiuuuS4i+eahOWtkOivhOiuui4NCiAqDQogKiBAcGFyYW0gaW50ICRpZCDniLbor4TorrpJRA0KICovDQpmdW5jdGlvbiBEZWxDb21tZW50X0NoaWxkcmVuKCRpZCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRjbXQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KDQogICAgZm9yZWFjaCAoJGNtdC0+Q29tbWVudHMgYXMgJGNvbW1lbnQpIHsNCiAgICAgICAgaWYgKGNvdW50KCRjb21tZW50LT5Db21tZW50cykgPiAwKSB7DQogICAgICAgICAgICBEZWxDb21tZW50X0NoaWxkcmVuKCRjb21tZW50LT5JRCk7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRjb21tZW50LT5Jc0NoZWNraW5nID09IGZhbHNlKSB7DQogICAgICAgICAgICBDb3VudENvbW1lbnROdW1zKC0xLCAwKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoLTEsIC0xKTsNCiAgICAgICAgfQ0KICAgICAgICAkY29tbWVudC0+RGVsKCk7DQogICAgfQ0KfQ0KDQovKioNCiAqIOWPquWOhumBjeW5tuS/neeVmeivhOiuumlk6L+bYXJyYXks5LiN6L+b6KGM5Yig6ZmkLg0KICoNCiAqIEBwYXJhbSBpbnQgICAgICAgJGlkICAgIOeItuivhOiuuklEDQogKiBAcGFyYW0gQ29tbWVudFtdICRhcnJheSDlsIblrZDor4TorrpJROWtmOWFpeaWsOaVsOe7hA0KICovDQpmdW5jdGlvbiBHZXRTdWJDb21tZW50cygkaWQsICYkYXJyYXkpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAvKiBAdmFyIENvbW1lbnQgJGNtdCAqLw0KICAgICRjbXQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KDQogICAgZm9yZWFjaCAoJGNtdC0+Q29tbWVudHMgYXMgJGNvbW1lbnQpIHsNCiAgICAgICAgJGFycmF5W10gPSAkY29tbWVudC0+SUQ7DQogICAgICAgIGlmIChjb3VudCgkY29tbWVudC0+Q29tbWVudHMpID4gMCkgew0KICAgICAgICAgICAgR2V0U3ViQ29tbWVudHMoJGNvbW1lbnQtPklELCAkYXJyYXkpOw0KICAgICAgICB9DQogICAgfQ0KfQ0KDQovKioNCiAq5qOA5p+l6K+E6K665pWw5o2u5bm25L+d5a2Y44CB5pu05paw6K6h5pWw44CB5pu05paw4oCc5pyA5paw6K+E6K664oCd5qih5Z2XLg0KICovDQpmdW5jdGlvbiBDaGVja0NvbW1lbnQoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnKTsNCiAgICAkaXNjaGVja2luZyA9IChib29sKSBHZXRWYXJzKCdpc2NoZWNraW5nJyk7DQoNCiAgICAkY210ID0gJHpicC0+R2V0Q29tbWVudEJ5SUQoJGlkKTsNCiAgICBpZiAoJGNtdC0+SUQgPT0gMCkgew0KICAgICAgICByZXR1cm4gJGNtdDsNCiAgICB9DQogICAgaWYgKCR6YnAtPkNoZWNrUmlnaHRzKCdDb21tZW50QWxsJykgPT0gZmFsc2UpIHsNCiAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEICE9ICR6YnAtPnVzZXItPklEICYmICRjbXQtPlBvc3QtPkF1dGhvcklEICE9ICR6YnAtPnVzZXItPklEKSB7DQogICAgICAgICAgICByZXR1cm4gJGNtdDsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICRvcmlnX2NoZWNrID0gKGJvb2wpICRjbXQtPklzQ2hlY2tpbmc7DQogICAgJGNtdC0+SXNDaGVja2luZyA9ICRpc2NoZWNraW5nOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fQ2hlY2tDb21tZW50X0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkY210KTsNCiAgICB9DQoNCiAgICAkY210LT5TYXZlKCk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9DaGVja0NvbW1lbnRfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRjbXQpOw0KICAgIH0NCg0KICAgIGlmICgoJG9yaWdfY2hlY2spICYmICghJGlzY2hlY2tpbmcpKSB7DQogICAgICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgKzEpOw0KICAgICAgICBDb3VudENvbW1lbnROdW1zKDAsIC0xKTsNCiAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEID4gMCkgew0KICAgICAgICAgICAgQ291bnRNZW1iZXIoJGNtdC0+QXV0aG9yLCBhcnJheSgwLCAwLCArMSwgMCkpOw0KICAgICAgICAgICAgJGNtdC0+QXV0aG9yLT5TYXZlKCk7DQogICAgICAgIH0NCiAgICB9IGVsc2VpZiAoKCEkb3JpZ19jaGVjaykgJiYgKCRpc2NoZWNraW5nKSkgew0KICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksIC0xKTsNCiAgICAgICAgQ291bnRDb21tZW50TnVtcygwLCArMSk7DQogICAgICAgIGlmICgkY210LT5BdXRob3JJRCA+IDApIHsNCiAgICAgICAgICAgIENvdW50TWVtYmVyKCRjbXQtPkF1dGhvciwgYXJyYXkoMCwgMCwgLTEsIDApKTsNCiAgICAgICAgICAgICRjbXQtPkF1dGhvci0+U2F2ZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NvbW1lbnRzJyk7DQoNCiAgICByZXR1cm4gJGNtdDsNCn0NCg0KLyoqDQogKiDor4Torrrmibnph4/lpITnkIbvvIjliKDpmaTjgIHpgJrov4flrqHmoLjjgIHliqDlhaXlrqHmoLjvvIkuDQogKi8NCmZ1bmN0aW9uIEJhdGNoQ29tbWVudCgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKGlzc2V0KCRfUE9TVFsnYWxsX2RlbCddKSkgew0KICAgICAgICAkdHlwZSA9ICdhbGxfZGVsJzsNCiAgICB9IGVsc2VpZiAoaXNzZXQoJF9QT1NUWydhbGxfcGFzcyddKSkgew0KICAgICAgICAkdHlwZSA9ICdhbGxfcGFzcyc7DQogICAgfSBlbHNlaWYgKGlzc2V0KCRfUE9TVFsnYWxsX2F1ZGl0J10pKSB7DQogICAgICAgICR0eXBlID0gJ2FsbF9hdWRpdCc7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnaWQnXSkpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgIH0NCiAgICAkYXJyYXkgPSAkX1BPU1RbJ2lkJ107DQogICAgaWYgKGlzX2FycmF5KCRhcnJheSkpIHsNCiAgICAgICAgJGFycmF5ID0gYXJyYXlfdW5pcXVlKCRhcnJheSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGFycmF5ID0gYXJyYXkoJGFycmF5KTsNCiAgICB9DQoNCiAgICAkY2hpbGRBcnJheSA9ICR6YnAtPkdldENvbW1lbnRCeUFycmF5KCRhcnJheSk7DQoNCiAgICAvLyBTZWFyY2ggQ2hpbGQgQ29tbWVudHMNCiAgICAvKiBAdmFyIENvbW1lbnRbXSAkY2hpbGRBcnJheSAqLw0KICAgIC8vJGNoaWxkQXJyYXkgPSBhcnJheSgpOw0KICAgIC8vZm9yZWFjaCAoJGFycmF5IGFzICRpID0+ICRpZCkgew0KICAgIC8vICAgICRjbXQgPSAkemJwLT5HZXRDb21tZW50QnlJRCgkaWQpOw0KICAgIC8vICAgIGlmICgkY210LT5JRCA9PSAwKSB7DQogICAgLy8gICAgICAgIGNvbnRpbnVlOw0KICAgIC8vICAgIH0NCiAgICAvLyAgICAkY2hpbGRBcnJheVtdID0gJGNtdDsNCiAgICAvLyAgICBHZXRTdWJDb21tZW50cygkY210LT5JRCwgJGNoaWxkQXJyYXkpOw0KICAgIC8vfQ0KDQogICAgLy8gVW5pcXVlIGNoaWxkIGFycmF5DQogICAgLy8kY2hpbGRBcnJheSA9IGFycmF5X3VuaXF1ZSgkY2hpbGRBcnJheSk7DQogICAgLy9mb3JlYWNoICgkY2hpbGRBcnJheSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgIC8vICAgIGlmIChpc19pbnQoJHZhbHVlKSkgew0KICAgIC8vICAgICAgICAkY2hpbGRBcnJheVska2V5XSA9ICR6YnAtPkdldENvbW1lbnRCeUlEKCR2YWx1ZSk7DQogICAgLy8gICAgfQ0KICAgIC8vICAgIGlmIChpc19zdWJjbGFzc19vZigkY2hpbGRBcnJheVska2V5XSwgJ0Jhc2UnKSA9PSBmYWxzZSB8fCAkY2hpbGRBcnJheVska2V5XS0+SUQgPT0gMCkgew0KICAgIC8vICAgICAgICB1bnNldCgkY2hpbGRBcnJheVska2V5XSk7DQogICAgLy8gICAgfQ0KICAgIC8vfQ0KDQogICAgaWYgKCR0eXBlID09ICdhbGxfZGVsJykgew0KICAgICAgICBmb3JlYWNoICgkY2hpbGRBcnJheSBhcyAkaSA9PiAkY210KSB7DQogICAgICAgICAgICBpZiAoJHpicC0+Q2hlY2tSaWdodHMoJ0NvbW1lbnRBbGwnKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIGlmICgkY210LT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCAmJiAkY210LT5Qb3N0LT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRjbXQtPkRlbCgpOw0KICAgICAgICAgICAgaWYgKCEkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgICAgICAgICAgQ291bnRQb3N0QXJyYXkoYXJyYXkoJGNtdC0+TG9nSUQpLCAtMSk7DQogICAgICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygtMSwgMCk7DQogICAgICAgICAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEID4gMCkgew0KICAgICAgICAgICAgICAgICAgICBDb3VudE1lbWJlcigkY210LT5BdXRob3IsIGFycmF5KDAsIDAsIC0xLCAwKSk7DQogICAgICAgICAgICAgICAgICAgICRjbXQtPkF1dGhvci0+U2F2ZSgpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygtMSwgLTEpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKCR0eXBlID09ICdhbGxfcGFzcycpIHsNCiAgICAgICAgZm9yZWFjaCAoJGNoaWxkQXJyYXkgYXMgJGkgPT4gJGNtdCkgew0KICAgICAgICAgICAgaWYgKCEkY210LT5Jc0NoZWNraW5nKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAoJHpicC0+Q2hlY2tSaWdodHMoJ0NvbW1lbnRBbGwnKSA9PSBmYWxzZSkgew0KICAgICAgICAgICAgICAgIGlmICgkY210LT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCAmJiAkY210LT5Qb3N0LT5BdXRob3JJRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICRjbXQtPklzQ2hlY2tpbmcgPSBmYWxzZTsNCiAgICAgICAgICAgICRjbXQtPlNhdmUoKTsNCiAgICAgICAgICAgIENvdW50UG9zdEFycmF5KGFycmF5KCRjbXQtPkxvZ0lEKSwgKzEpOw0KICAgICAgICAgICAgQ291bnRDb21tZW50TnVtcygwLCAtMSk7DQogICAgICAgICAgICBpZiAoJGNtdC0+QXV0aG9ySUQgPiAwKSB7DQogICAgICAgICAgICAgICAgQ291bnRNZW1iZXIoJGNtdC0+QXV0aG9yLCBhcnJheSgwLCAwLCAxLCAwKSk7DQogICAgICAgICAgICAgICAgJGNtdC0+QXV0aG9yLT5TYXZlKCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9IGVsc2VpZiAoJHR5cGUgPT0gJ2FsbF9hdWRpdCcpIHsNCiAgICAgICAgZm9yZWFjaCAoJGNoaWxkQXJyYXkgYXMgJGkgPT4gJGNtdCkgew0KICAgICAgICAgICAgaWYgKCRjbXQtPklzQ2hlY2tpbmcpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmICgkemJwLT5DaGVja1JpZ2h0cygnQ29tbWVudEFsbCcpID09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEICE9ICR6YnAtPnVzZXItPklEICYmICRjbXQtPlBvc3QtPkF1dGhvcklEICE9ICR6YnAtPnVzZXItPklEKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJGNtdC0+SXNDaGVja2luZyA9IHRydWU7DQogICAgICAgICAgICAkY210LT5TYXZlKCk7DQogICAgICAgICAgICBDb3VudFBvc3RBcnJheShhcnJheSgkY210LT5Mb2dJRCksIC0xKTsNCiAgICAgICAgICAgIENvdW50Q29tbWVudE51bXMoMCwgKzEpOw0KICAgICAgICAgICAgaWYgKCRjbXQtPkF1dGhvcklEID4gMCkgew0KICAgICAgICAgICAgICAgIENvdW50TWVtYmVyKCRjbXQtPkF1dGhvciwgYXJyYXkoMCwgMCwgLTEsIDApKTsNCiAgICAgICAgICAgICAgICAkY210LT5BdXRob3ItPlNhdmUoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCdjb21tZW50cycpOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQovKioNCiAqIOaPkOS6pOWIhuexu+aVsOaNri4NCiAqDQogKiBAcmV0dXJuIENhdGVnb3J5fGZhbHNlDQogKi8NCmZ1bmN0aW9uIFBvc3RDYXRlZ29yeSgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnQ2F0ZWdvcnlQc3QnKSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICBpZiAoIWlzc2V0KCRfUE9TVFsnSUQnXSkpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ0FsaWFzJ10pKSB7DQogICAgICAgICRfUE9TVFsnQWxpYXMnXSA9IEZvcm1hdFN0cmluZygkX1BPU1RbJ0FsaWFzJ10sICdbbm9zY3JpcHRdJyk7DQogICAgfQ0KDQogICAgJHBhcmVudGlkID0gKGludCkgR2V0VmFycygnUGFyZW50SUQnLCAnUE9TVCcpOw0KICAgIGlmICgkcGFyZW50aWQgPiAwKSB7DQogICAgICAgIGlmIChpc3NldCgkemJwLT5jYXRlZ29yaWVzX2FsbFskcGFyZW50aWRdKSAmJiAkemJwLT5jYXRlZ29yaWVzX2FsbFskcGFyZW50aWRdLT5MZXZlbCA+ICgkemJwLT5jYXRlZ29yeV9yZWN1cnNpb25fbGV2ZWwgLSAyKSkgew0KICAgICAgICAgICAgJF9QT1NUWydQYXJlbnRJRCddID0gJzAnOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJGNhdGUgPSBuZXcgQ2F0ZWdvcnkoKTsNCiAgICAkY2F0ZV9pZCA9IChpbnQpIEdldFZhcnMoJ0lEJywgJ1BPU1QnKTsNCiAgICBpZiAoJGNhdGVfaWQgPT0gMCkgew0KICAgICAgICAkaSA9IDA7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ0NhdGVnb3J5TmV3JykpIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgICAgJGNhdGUgPSAkemJwLT5HZXRDYXRlZ29yeUJ5SUQoJGNhdGVfaWQpOw0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdDYXRlZ29yeUVkdCcpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydDYXRlZ29yeSddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGtleV0pKSB7DQogICAgICAgICAgICAkY2F0ZS0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIEZpbHRlck1ldGEoJGNhdGUpOw0KDQogICAgJGNhdGUtPlVwZGF0ZVRpbWUgPSB0aW1lKCk7DQoNCiAgICAvL+WIt+aWsFJvb3RJRA0KICAgICRjYXRlLT5MZXZlbDsNCg0KICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX1Bvc3RDYXRlZ29yeV9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJGNhdGUpOw0KICAgIH0NCg0KICAgIEZpbHRlckNhdGVnb3J5KCRjYXRlKTsNCg0KICAgIC8vIOatpOWkhOeUqOS9nOWIt+aWsOWIhuexu+WGheaWh+eroOaVsOaNruS9v+eUqO+8jOS4jeS9nOabtOaUuQ0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0xBUkdFX0RBVEEnXSA9PSBmYWxzZSkgew0KICAgICAgICBpZiAoJGNhdGUtPklEID4gMCkgew0KICAgICAgICAgICAgQ291bnRDYXRlZ29yeSgkY2F0ZSwgbnVsbCwgJGNhdGUtPlR5cGUpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJGNhdGUtPlNhdmUoKTsNCiAgICAkemJwLT5BZGRDYWNoZSgkY2F0ZSk7DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnY2F0YWxvZycpOw0KDQogICAgaWYgKEdldFZhcnMoJ0FkZE5hdmJhcicsICdQT1NUJykgPT09ICcwJykgew0KICAgICAgICAkemJwLT5EZWxJdGVtVG9OYXZiYXIoJ2NhdGVnb3J5JywgJGNhdGUtPklEKTsNCiAgICB9DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PT0gJzEnKSB7DQogICAgICAgICR6YnAtPkFkZEl0ZW1Ub05hdmJhcignY2F0ZWdvcnknLCAkY2F0ZS0+SUQsICRjYXRlLT5OYW1lLCAkY2F0ZS0+VXJsKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0Q2F0ZWdvcnlfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAkZnBuYW1lKCRjYXRlKTsNCiAgICB9DQoNCiAgICByZXR1cm4gJGNhdGU7DQp9DQoNCi8qKg0KICog5Yig6Zmk5YiG57G7Lg0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBib29sDQogKi8NCmZ1bmN0aW9uIERlbENhdGVnb3J5KCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdDYXRlZ29yeURlbCcpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJyk7DQogICAgJGNhdGUgPSAkemJwLT5HZXRDYXRlZ29yeUJ5SUQoJGlkKTsNCiAgICBpZiAoJGNhdGUtPklEID4gMCkgew0KICAgICAgICBpZiAoY291bnQoJGNhdGUtPlN1YkNhdGVnb3JpZXMpID4gMCkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDQ5LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCg0KICAgICAgICBEZWxDYXRlZ29yeV9BcnRpY2xlcygkY2F0ZS0+SUQpOw0KICAgICAgICAkY2F0ZS0+RGVsKCk7DQoNCiAgICAgICAgJHpicC0+TG9hZENhdGVnb3JpZXMoKTsNCiAgICAgICAgJHpicC0+QWRkQnVpbGRNb2R1bGUoJ2NhdGFsb2cnKTsNCiAgICAgICAgJHpicC0+RGVsSXRlbVRvTmF2YmFyKCdjYXRlZ29yeScsICRjYXRlLT5JRCk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsQ2F0ZWdvcnlfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgJGZwbmFtZSgkY2F0ZSk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2U7DQp9DQoNCi8qKg0KICog5Yig6Zmk5YiG57G75LiL5omA5pyJ5paH56ugLg0KICoNCiAqIEBwYXJhbSBpbnQgJGlkIOWIhuexu0lEDQogKi8NCmZ1bmN0aW9uIERlbENhdGVnb3J5X0FydGljbGVzKCRpZCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRzcWwgPSAkemJwLT5kYi0+c3FsLT5VcGRhdGUoJHpicC0+dGFibGVbJ1Bvc3QnXSwgYXJyYXkoJ2xvZ19DYXRlSUQnID0+IDApLCBhcnJheShhcnJheSgnPScsICdsb2dfQ2F0ZUlEJywgJGlkKSkpOw0KICAgICR6YnAtPmRiLT5VcGRhdGUoJHNxbCk7DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCi8qKg0KICog5o+Q5Lqk5qCH562+5pWw5o2uLg0KICoNCiAqIEByZXR1cm4gVGFnfGZhbHNlDQogKi8NCmZ1bmN0aW9uIFBvc3RUYWcoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1RhZ1BzdCcpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnQWxpYXMnXSkpIHsNCiAgICAgICAgJF9QT1NUWydBbGlhcyddID0gRm9ybWF0U3RyaW5nKCRfUE9TVFsnQWxpYXMnXSwgJ1tub3NjcmlwdF0nKTsNCiAgICB9DQoNCiAgICAkdGFnID0gbmV3IFRhZygpOw0KICAgIGlmIChHZXRWYXJzKCdJRCcsICdQT1NUJykgPT0gMCkgew0KICAgICAgICAkaSA9IDA7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1RhZ05ldycpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICR0YWcgPSAkemJwLT5HZXRUYWdCeUlEKEdldFZhcnMoJ0lEJywgJ1BPU1QnKSk7DQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1RhZ0VkdCcpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydUYWcnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJHRhZy0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIEZpbHRlck1ldGEoJHRhZyk7DQoNCiAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9Qb3N0VGFnX0NvcmUnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgJGZwbmFtZSgkdGFnKTsNCiAgICB9DQoNCiAgICBGaWx0ZXJUYWcoJHRhZyk7DQoNCiAgICAkdGFnLT5VcGRhdGVUaW1lID0gdGltZSgpOw0KDQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfTEFSR0VfREFUQSddID09IGZhbHNlKSB7DQogICAgICAgIENvdW50VGFnKCR0YWcpOw0KICAgIH0NCg0KICAgIC8v5qOA5p+lTmFtZemHjeWQjSjnlKhHZXRUYWdMaXN05LiN55SoR2V0VGFnQnlOYW1lKQ0KICAgICRhcnJheSA9ICR6YnAtPkdldFRhZ0xpc3QoJyonLCBhcnJheShhcnJheSgnPScsICd0YWdfTmFtZScsICR0YWctPk5hbWUpLCBhcnJheSgnPScsICd0YWdfVHlwZScsICR0YWctPlR5cGUpKSwgJycsIDEsICcnKTsNCiAgICAkY2hlY2tUYWcgPSBuZXcgVGFnKCk7DQogICAgaWYgKGNvdW50KCRhcnJheSkgPiAwKSB7DQogICAgICAgICRjaGVja1RhZyA9ICRhcnJheVswXTsNCiAgICB9DQogICAgaWYgKCgkdGFnLT5JRCA9PSAwICYmICRjaGVja1RhZy0+SUQgPiAwKSB8fCAoJHRhZy0+SUQgPiAwICYmICRjaGVja1RhZy0+SUQgPiAwICYmICRjaGVja1RhZy0+SUQgIT0gJHRhZy0+SUQpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig5OCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICAkdGFnLT5TYXZlKCk7DQogICAgJHpicC0+QWRkQ2FjaGUoJHRhZyk7DQoNCiAgICBpZiAoR2V0VmFycygnQWRkTmF2YmFyJywgJ1BPU1QnKSA9PT0gJzAnKSB7DQogICAgICAgICR6YnAtPkRlbEl0ZW1Ub05hdmJhcigndGFnJywgJHRhZy0+SUQpOw0KICAgIH0NCg0KICAgIGlmIChHZXRWYXJzKCdBZGROYXZiYXInLCAnUE9TVCcpID09PSAnMScpIHsNCiAgICAgICAgJHpicC0+QWRkSXRlbVRvTmF2YmFyKCd0YWcnLCAkdGFnLT5JRCwgJHRhZy0+TmFtZSwgJHRhZy0+VXJsKTsNCiAgICB9DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgndGFncycpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFRhZ19TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJHRhZyk7DQogICAgfQ0KDQogICAgcmV0dXJuICR0YWc7DQp9DQoNCi8qKg0KICog5Yig6Zmk5qCH562+Lg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxUYWcoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ1RhZ0RlbCcpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgICR0YWdpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICR0YWcgPSAkemJwLT5HZXRUYWdCeUlEKCR0YWdpZCk7DQogICAgaWYgKCR0YWctPklEID4gMCkgew0KICAgICAgICAkdGFnLT5EZWwoKTsNCiAgICAgICAgJHpicC0+RGVsSXRlbVRvTmF2YmFyKCd0YWcnLCAkdGFnLT5JRCk7DQogICAgICAgICR6YnAtPkFkZEJ1aWxkTW9kdWxlKCd0YWdzJyk7DQogICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbFRhZ19TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCR0YWcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgcmV0dXJuIHRydWU7DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCi8qKg0KICog5o+Q5Lqk55So5oi35pWw5o2uLg0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBNZW1iZXJ8ZmFsc2UNCiAqLw0KZnVuY3Rpb24gUG9zdE1lbWJlcigpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnTWVtYmVyUHN0JykpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQogICAgJG1lbSA9IG5ldyBNZW1iZXIoKTsNCg0KICAgICRkYXRhID0gYXJyYXkoKTsNCg0KICAgIGlmICghaXNzZXQoJF9QT1NUWydJRCddKSkgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgLy/mo4DmtYvlr4bnoIENCiAgICBpZiAodHJpbSgkX1BPU1RbIlBhc3N3b3JkIl0pID09ICcnIHx8IHRyaW0oJF9QT1NUWyJQYXNzd29yZFJlIl0pID09ICcnIHx8ICRfUE9TVFsiUGFzc3dvcmQiXSAhPSAkX1BPU1RbIlBhc3N3b3JkUmUiXSkgew0KICAgICAgICB1bnNldCgkX1BPU1RbIlBhc3N3b3JkIl0pOw0KICAgICAgICB1bnNldCgkX1BPU1RbIlBhc3N3b3JkUmUiXSk7DQogICAgfQ0KDQogICAgJGRhdGFbJ0lEJ10gPSAkX1BPU1RbJ0lEJ107DQogICAgJGVkaXRhYmxlRmllbGQgPSBhcnJheSgnUGFzc3dvcmQnLCAnRW1haWwnLCAnSG9tZVBhZ2UnLCAnQWxpYXMnLCAnSW50cm8nLCAnVGVtcGxhdGUnKTsNCiAgICAvLyDlpoLmnpzmmK/nrqHnkIblkZjvvIzliJnlho3lhYHorrjmlLnliqjliKvnmoTlrZfmrrUNCiAgICBpZiAoJHpicC0+Q2hlY2tSaWdodHMoJ01lbWJlckFsbCcpKSB7DQogICAgICAgIGFycmF5X3B1c2goJGVkaXRhYmxlRmllbGQsICdMZXZlbCcsICdTdGF0dXMnLCAnTmFtZScsICdJUCcpOw0KICAgIH0NCiAgICAvLyDlpI3liLbkuIDkuKrmlrDmlbDnu4QNCiAgICBmb3JlYWNoICgkZWRpdGFibGVGaWVsZCBhcyAkdmFsdWUpIHsNCiAgICAgICAgaWYgKGlzc2V0KCRfUE9TVFskdmFsdWVdKSkgew0KICAgICAgICAgICAgJGRhdGFbJHZhbHVlXSA9IEdldFZhcnMoJHZhbHVlLCAnUE9TVCcpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRkYXRhWydOYW1lJ10pKSB7DQogICAgICAgIC8vIOajgOa1i+WQjOWQjQ0KICAgICAgICAkbSA9ICR6YnAtPkdldE1lbWJlckJ5TmFtZSgkZGF0YVsnTmFtZSddKTsNCiAgICAgICAgaWYgKCRtLT5JRCA+IDAgJiYgJG0tPklEICE9ICRkYXRhWydJRCddKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNjIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoaXNzZXQoJGRhdGFbJ0FsaWFzJ10pKSB7DQogICAgICAgICRkYXRhWydBbGlhcyddID0gRm9ybWF0U3RyaW5nKCRkYXRhWydBbGlhcyddLCAnW25vc2NyaXB0XScpOw0KICAgIH0NCg0KICAgIGlmICgkZGF0YVsnSUQnXSA9PSAwKSB7DQogICAgICAgIC8v5paw5bu655So5oi35b+F6aG75o+Q5L6b5a+G56CBDQogICAgICAgIGlmICghaXNzZXQoJGRhdGFbJ1Bhc3N3b3JkJ10pIHx8ICRkYXRhWydQYXNzd29yZCddID09ICcnKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNzMsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgJGRhdGFbJ0lQJ10gPSBHZXRHdWVzdElQKCk7DQogICAgICAgIGlmICgkbWVtLT5HdWlkID09ICcnKSB7DQogICAgICAgICAgICAkbWVtLT5HdWlkID0gR2V0R3VpZCgpOw0KICAgICAgICB9DQogICAgICAgIC8v5qOA5p+l5paw5bu655So5oi35p2D6ZmQDQogICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ01lbWJlck5ldycpKSB7DQogICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgICRtZW0gPSAkemJwLT5HZXRNZW1iZXJCeUlEKCRkYXRhWydJRCddKTsNCiAgICAgICAgaWYgKCRtZW0tPklEID09IDApIHsNCiAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig2OSwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgICAgICAvL+ajgOafpee8lui+keeUqOaIt+adg+mZkA0KICAgICAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdNZW1iZXJFZHQnKSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgIH0NCiAgICAgICAgLy/mo4Dmn6XnvJbovpHku5bkurooTWVtYmVyQWxsKQ0KICAgICAgICBpZiAoJG1lbS0+SUQgPD4gJHpicC0+dXNlci0+SUQpIHsNCiAgICAgICAgICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ01lbWJlckFsbCcpKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoJG1lbS0+SXNHb2QgPT0gdHJ1ZSkgew0KICAgICAgICBpZiAoJHpicC0+dXNlci0+SXNHb2QgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgIHVuc2V0KCRkYXRhWydQYXNzd29yZCddKTsNCiAgICAgICAgICAgIHVuc2V0KCRkYXRhWydOYW1lJ10pOw0KICAgICAgICAgICAgdW5zZXQoJGRhdGFbJ0VtYWlsJ10pOw0KICAgICAgICAgICAgdW5zZXQoJGRhdGFbJ0FsaWFzJ10pOw0KICAgICAgICAgICAgdW5zZXQoJGRhdGFbJ1N0YXR1cyddKTsNCiAgICAgICAgICAgIHVuc2V0KCRkYXRhWydJbnRybyddKTsNCiAgICAgICAgICAgIHVuc2V0KCRkYXRhWydIb21lUGFnZSddKTsNCiAgICAgICAgfQ0KICAgICAgICB1bnNldCgkZGF0YVsnTGV2ZWwnXSk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJHpicC0+ZGF0YWluZm9bJ01lbWJlciddIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgka2V5ID09ICdJRCcgfHwgJGtleSA9PSAnTWV0YScpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmIChpc3NldCgkZGF0YVska2V5XSkpIHsNCiAgICAgICAgICAgICRtZW0tPiRrZXkgPSAkZGF0YVska2V5XTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8vIOeEtuWQju+8jOivu+WFpeWvhueggQ0KICAgIC8vIOWvhueggemcgOimgeWNleeLrOWkhOeQhu+8jOWboOS4uuaLv+S4jeWIsOeUqOaIt0d1aWQNCiAgICBpZiAoaXNzZXQoJGRhdGFbJ1Bhc3N3b3JkJ10pKSB7DQogICAgICAgICRkYXRhWydQYXNzd29yZCddID0gdHJpbSgkZGF0YVsnUGFzc3dvcmQnXSk7DQogICAgICAgIGlmICgkZGF0YVsnUGFzc3dvcmQnXSAhPSAnJykgew0KICAgICAgICAgICAgaWYgKHN0cmxlbigkZGF0YVsnUGFzc3dvcmQnXSkgPCAkemJwLT5vcHRpb25bJ1pDX1BBU1NXT1JEX01JTiddIHx8IHN0cmxlbigkZGF0YVsnUGFzc3dvcmQnXSkgPiAkemJwLT5vcHRpb25bJ1pDX1BBU1NXT1JEX01BWCddKSB7DQogICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDU0LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFDaGVja1JlZ0V4cCgkZGF0YVsnUGFzc3dvcmQnXSwgJ1twYXNzd29yZF0nKSkgew0KICAgICAgICAgICAgICAgICR6YnAtPlNob3dFcnJvcig1NCwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICRtZW0tPlBhc3N3b3JkID0gTWVtYmVyOjpHZXRQYXNzV29yZEJ5R3VpZCgkZGF0YVsnUGFzc3dvcmQnXSwgJG1lbS0+R3VpZCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBGaWx0ZXJNZXRhKCRtZW0pOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdE1lbWJlcl9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJG1lbSk7DQogICAgfQ0KDQogICAgRmlsdGVyTWVtYmVyKCRtZW0pOw0KDQogICAgJG1lbS0+VXBkYXRlVGltZSA9IHRpbWUoKTsNCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0xBUkdFX0RBVEEnXSA9PSBmYWxzZSkgew0KICAgICAgICBDb3VudE1lbWJlcigkbWVtLCBhcnJheShudWxsLCBudWxsLCBudWxsLCBudWxsKSk7DQogICAgfQ0KDQogICAgLy8g5p+l6K+i5ZCM5ZCNDQogICAgaWYgKGlzc2V0KCRkYXRhWydOYW1lJ10pKSB7DQogICAgICAgIGlmICgkZGF0YVsnSUQnXSA9PSAwKSB7DQogICAgICAgICAgICBpZiAoJHpicC0+Q2hlY2tNZW1iZXJOYW1lRXhpc3QoJGRhdGFbJ05hbWUnXSkpIHsNCiAgICAgICAgICAgICAgICAkemJwLT5TaG93RXJyb3IoNjIsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkbWVtLT5TYXZlKCk7DQogICAgJHpicC0+QWRkQ2FjaGUoJG1lbSk7DQoNCiAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgnYXV0aG9ycycpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdE1lbWJlcl9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJG1lbSk7DQogICAgfQ0KDQogICAgcmV0dXJuICRtZW07DQp9DQoNCi8qKg0KICog5Yig6Zmk55So5oi3Lg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxNZW1iZXIoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ01lbWJlckRlbCcpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgICRpZCA9IChpbnQpIEdldFZhcnMoJ2lkJywgJ0dFVCcpOw0KICAgICRtZW0gPSAkemJwLT5HZXRNZW1iZXJCeUlEKCRpZCk7DQogICAgaWYgKCRtZW0tPklEID4gMCAmJiAkbWVtLT5JRCAhPSAkemJwLT51c2VyLT5JRCkgew0KICAgICAgICBpZiAoJG1lbS0+SXNHb2QgIT09IHRydWUpIHsNCiAgICAgICAgICAgIERlbE1lbWJlcl9BbGxEYXRhKCRpZCk7DQogICAgICAgICAgICAkbWVtLT5EZWwoKTsNCiAgICAgICAgICAgIGZvcmVhY2ggKCRHTE9CQUxTWydob29rcyddWydGaWx0ZXJfUGx1Z2luX0RlbE1lbWJlcl9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAgICAgJGZwbmFtZSgkbWVtKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDliKDpmaTnlKjmiLfkuIvmiYDmnInmlbDmja7vvIjljIXmi6zmlofnq6DjgIHor4TorrrjgIHpmYTku7bvvIkuDQogKg0KICogQHBhcmFtIGludCAkaWQg55So5oi3SUQNCiAqLw0KZnVuY3Rpb24gRGVsTWVtYmVyX0FsbERhdGEoJGlkKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgJHcgPSBhcnJheSgpOw0KICAgICR3W10gPSBhcnJheSgnPScsICdsb2dfQXV0aG9ySUQnLCAkaWQpOw0KDQogICAgLyogQHZhciBQb3N0W10gJGFydGljbGVzICovDQogICAgJGFydGljbGVzID0gJHpicC0+R2V0UG9zdExpc3QoJyonLCAkdyk7DQogICAgZm9yZWFjaCAoJGFydGljbGVzIGFzICRhKSB7DQogICAgICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0RFTE1FTUJFUl9XSVRIX0FMTERBVEEnXSA9PSB0cnVlKSB7DQogICAgICAgICAgICAkYS0+RGVsKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkYS0+QXV0aG9ySUQgPSAwOw0KICAgICAgICAgICAgJGEtPlNhdmUoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR3ID0gYXJyYXkoKTsNCiAgICAkd1tdID0gYXJyYXkoJz0nLCAnY29tbV9BdXRob3JJRCcsICRpZCk7DQogICAgLyogQHZhciBDb21tZW50W10gJGNvbW1lbnRzICovDQogICAgJGNvbW1lbnRzID0gJHpicC0+R2V0Q29tbWVudExpc3QoJyonLCAkdyk7DQogICAgZm9yZWFjaCAoJGNvbW1lbnRzIGFzICRjKSB7DQogICAgICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0RFTE1FTUJFUl9XSVRIX0FMTERBVEEnXSA9PSB0cnVlKSB7DQogICAgICAgICAgICAkYy0+RGVsKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkYy0+QXV0aG9ySUQgPSAwOw0KICAgICAgICAgICAgJGMtPlNhdmUoKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR3ID0gYXJyYXkoKTsNCiAgICAkd1tdID0gYXJyYXkoJz0nLCAndWxfQXV0aG9ySUQnLCAkaWQpOw0KICAgIC8qIEB2YXIgVXBsb2FkW10gJHVwbG9hZHMgKi8NCiAgICAkdXBsb2FkcyA9ICR6YnAtPkdldFVwbG9hZExpc3QoJyonLCAkdyk7DQogICAgZm9yZWFjaCAoJHVwbG9hZHMgYXMgJHUpIHsNCiAgICAgICAgJHUtPkRlbCgpOw0KICAgICAgICAkdS0+RGVsRmlsZSgpOw0KICAgIH0NCn0NCg0KLy8jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMNCg0KLyoqDQogKiDmj5DkuqTmqKHlnZfmlbDmja4uDQogKg0KICogQHJldHVybiBNb2R1bGV8ZmFsc2UNCiAqLw0KZnVuY3Rpb24gUG9zdE1vZHVsZSgpDQp7DQogICAgZ2xvYmFsICR6YnA7DQogICAgaWYgKCEkemJwLT5DaGVja1JpZ2h0cygnTW9kdWxlUHN0JykpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKDYsIF9fRklMRV9fLCBfX0xJTkVfXyk7DQogICAgfQ0KDQogICAgaWYgKGlzc2V0KCRfUE9TVFsnY2F0YWxvZ19zdHlsZSddKSkgew0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX01PRFVMRV9DQVRBTE9HX1NUWUxFJ10gPSAkX1BPU1RbJ2NhdGFsb2dfc3R5bGUnXTsNCiAgICAgICAgJHpicC0+U2F2ZU9wdGlvbigpOw0KICAgIH0NCg0KICAgIGlmICgkX1BPU1RbJ0ZpbGVOYW1lJ10gPT0gJ2FyY2hpdmVzJykgew0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWydhcmNoaXZlc19zdHlsZSddKSkgew0KICAgICAgICAgICAgJHpicC0+b3B0aW9uWydaQ19NT0RVTEVfQVJDSElWRVNfU1RZTEUnXSA9IDE7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAkemJwLT5vcHRpb25bJ1pDX01PRFVMRV9BUkNISVZFU19TVFlMRSddID0gMDsNCiAgICAgICAgfQ0KICAgICAgICAkemJwLT5TYXZlT3B0aW9uKCk7DQogICAgfQ0KDQogICAgaWYgKCFpc3NldCgkX1BPU1RbJ0lEJ10pKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICBpZiAoIUdldFZhcnMoJ0ZpbGVOYW1lJywgJ1BPU1QnKSkgew0KICAgICAgICAkX1BPU1RbJ0ZpbGVOYW1lJ10gPSAnbW9kJyAuIHJhbmQoMTAwMCwgOTk5OSk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgJF9QT1NUWydGaWxlTmFtZSddID0gc3RydG9sb3dlcigkX1BPU1RbJ0ZpbGVOYW1lJ10pOw0KICAgIH0NCiAgICBpZiAoIUdldFZhcnMoJ0h0bWxJRCcsICdQT1NUJykpIHsNCiAgICAgICAgJF9QT1NUWydIdG1sSUQnXSA9ICRfUE9TVFsnRmlsZU5hbWUnXTsNCiAgICB9DQogICAgaWYgKGlzc2V0KCRfUE9TVFsnTWF4TGknXSkpIHsNCiAgICAgICAgJF9QT1NUWydNYXhMaSddID0gKGludCkgJF9QT1NUWydNYXhMaSddOw0KICAgIH0NCiAgICBpZiAoaXNzZXQoJF9QT1NUWydJc0hpZGVUaXRsZSddKSkgew0KICAgICAgICAkX1BPU1RbJ0lzSGlkZVRpdGxlJ10gPSAoaW50KSAkX1BPU1RbJ0lzSGlkZVRpdGxlJ107DQogICAgfQ0KICAgIGlmICghaXNzZXQoJF9QT1NUWydUeXBlJ10pKSB7DQogICAgICAgICRfUE9TVFsnVHlwZSddID0gJ2Rpdic7DQogICAgfQ0KICAgIC8vIGlmIChpc3NldCgkX1BPU1RbJ0NvbnRlbnQnXSkpIHsNCiAgICAvLyAgICAgaWYgKCRfUE9TVFsnVHlwZSddICE9ICdkaXYnKSB7DQogICAgLy8gICAgICAgICAvLyBkaXbkuI3lho3ov4fmu6RccuWSjFxuLy8kX1BPU1RbJ0NvbnRlbnQnXSA9IHN0cl9yZXBsYWNlKGFycmF5KCJcciIsICJcbiIpLCBhcnJheSgnJywgJycpLCAkX1BPU1RbJ0NvbnRlbnQnXSk7DQogICAgLy8gICAgIH0NCiAgICAvLyB9DQoNCiAgICAvKiBAdmFyIE1vZHVsZSAkbW9kICovDQogICAgJG1vZCA9ICR6YnAtPkdldE1vZHVsZUJ5SUQoR2V0VmFycygnSUQnLCAnUE9TVCcpKTsNCg0KICAgIGZvcmVhY2ggKCR6YnAtPmRhdGFpbmZvWydNb2R1bGUnXSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoJGtleSA9PSAnSUQnIHx8ICRrZXkgPT0gJ01ldGEnKSB7DQogICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWyRrZXldKSkgew0KICAgICAgICAgICAgJG1vZC0+JGtleSA9IEdldFZhcnMoJGtleSwgJ1BPU1QnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX1BPU1RbJ05vUmVmcmVzaCddKSkgew0KICAgICAgICAkbW9kLT5Ob1JlZnJlc2ggPSAoYm9vbCkgJF9QT1NUWydOb1JlZnJlc2gnXTsNCiAgICB9DQoNCiAgICBGaWx0ZXJNZXRhKCRtb2QpOw0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdE1vZHVsZV9Db3JlJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJG1vZCk7DQogICAgfQ0KDQogICAgRmlsdGVyTW9kdWxlKCRtb2QpOw0KDQogICAgLy/kuI3og73mlrDlrZh0aGVtZWluY2x1ZGUNCiAgICBpZiAoJG1vZC0+U291cmNlVHlwZSA9PSAndGhlbWVpbmNsdWRlJykgew0KICAgICAgICAkZiA9ICR6YnAtPnVzZXJzZGlyIC4gJ3RoZW1lLycgLiAkemJwLT50aGVtZSAuICcvaW5jbHVkZS8nIC4gJG1vZC0+RmlsZU5hbWUgLiAnLnBocCc7DQogICAgICAgIGlmICghZmlsZV9leGlzdHMoJGYpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICAkbW9kLT5TYXZlKCk7DQogICAgJHpicC0+QWRkQ2FjaGUoJG1vZCk7DQoNCiAgICBpZiAoKGludCkgR2V0VmFycygnSUQnLCAnUE9TVCcpID4gMCkgew0KICAgICAgICAkemJwLT5BZGRCdWlsZE1vZHVsZSgkbW9kLT5GaWxlTmFtZSk7DQogICAgfQ0KDQogICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdE1vZHVsZV9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICRmcG5hbWUoJG1vZCk7DQogICAgfQ0KDQogICAgcmV0dXJuICRtb2Q7DQp9DQoNCi8qKg0KICog5Yig6Zmk5qih5Z2XLg0KICoNCiAqIEByZXR1cm4gYm9vbA0KICovDQpmdW5jdGlvbiBEZWxNb2R1bGUoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGlmICghJHpicC0+Q2hlY2tSaWdodHMoJ01vZHVsZURlbCcpKSB7DQogICAgICAgICR6YnAtPlNob3dFcnJvcig2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmIChpc3NldCgkX0dFVFsnaWQnXSkpIHsNCiAgICAgICAgJGlkID0gKGludCkgR2V0VmFycygnaWQnLCAnR0VUJyk7DQogICAgICAgICRtb2QgPSAkemJwLT5HZXRNb2R1bGVCeUlEKCRpZCk7DQogICAgICAgIGlmICgkbW9kLT5Tb3VyY2UgIT0gJ3N5c3RlbScgJiYgJG1vZC0+SUQgIT0gMCkgew0KICAgICAgICAgICAgJG1vZC0+RGVsKCk7DQogICAgICAgICAgICBmb3JlYWNoICgkR0xPQkFMU1snaG9va3MnXVsnRmlsdGVyX1BsdWdpbl9EZWxNb2R1bGVfU3VjY2VlZCddIGFzICRmcG5hbWUgPT4gJiRmcHNpZ25hbCkgew0KICAgICAgICAgICAgICAgICRmcG5hbWUoJG1vZCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB1bnNldCgkbW9kKTsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgfSBlbHNlaWYgKEdldFZhcnMoJ3NvdXJjZScsICdHRVQnKSA9PSAndGhlbWUnKSB7DQogICAgICAgICRmbiA9IEdldFZhcnMoJ2ZpbGVuYW1lJywgJ0dFVCcpOw0KICAgICAgICBpZiAoJGZuKSB7DQogICAgICAgICAgICAkbW9kID0gJHpicC0+R2V0TW9kdWxlQnlGaWxlTmFtZSgkZm4pOw0KICAgICAgICAgICAgaWYgKCRtb2QtPkZpbGVOYW1lID09ICRmbiAmJiAkbW9kLT5JRCAhPSAwKSB7DQogICAgICAgICAgICAgICAgJG1vZC0+RGVsKCk7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fRGVsTW9kdWxlX1N1Y2NlZWQnXSBhcyAkZnBuYW1lID0+ICYkZnBzaWduYWwpIHsNCiAgICAgICAgICAgICAgICAgICAgJGZwbmFtZSgkbW9kKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdW5zZXQoJG1vZCk7DQogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICByZXR1cm4gZmFsc2U7DQp9DQoNCi8vIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjDQoNCi8qKg0KICog6ZmE5Lu25LiK5LygLg0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKiBAcmV0dXJuIFVwbG9hZHxmYWxzZQ0KICovDQpmdW5jdGlvbiBQb3N0VXBsb2FkKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdVcGxvYWRQc3QnKSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICBmb3JlYWNoICgkX0ZJTEVTIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmICgkX0ZJTEVTWyRrZXldWydlcnJvciddID09IDApIHsNCiAgICAgICAgICAgIGlmIChpc191cGxvYWRlZF9maWxlKCRfRklMRVNbJGtleV1bJ3RtcF9uYW1lJ10pKSB7DQogICAgICAgICAgICAgICAgJHVwbG9hZCA9IG5ldyBVcGxvYWQoKTsNCiAgICAgICAgICAgICAgICAkdXBsb2FkLT5OYW1lID0gJF9GSUxFU1ska2V5XVsnbmFtZSddOw0KICAgICAgICAgICAgICAgIGlmIChHZXRWYXJzKCdhdXRvX3JlbmFtZScsICdQT1NUJykgPT0gJ29uJyB8fCBHZXRWYXJzKCdhdXRvX3JlbmFtZScsICdQT1NUJykgPT0gdHJ1ZSkgew0KICAgICAgICAgICAgICAgICAgICAkdGVtcF9hcnIgPSBleHBsb2RlKCIuIiwgJHVwbG9hZC0+TmFtZSk7DQogICAgICAgICAgICAgICAgICAgICRmaWxlX2V4dCA9IHN0cnRvbG93ZXIodHJpbShhcnJheV9wb3AoJHRlbXBfYXJyKSkpOw0KICAgICAgICAgICAgICAgICAgICAkdXBsb2FkLT5OYW1lID0gZGF0ZSgiWW1kSGlzIikgLiB0aW1lKCkgLiByYW5kKDEwMDAwLCA5OTk5OSkgLiAnLicgLiAkZmlsZV9leHQ7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICR1cGxvYWQtPlNvdXJjZU5hbWUgPSAkX0ZJTEVTWyRrZXldWyduYW1lJ107DQogICAgICAgICAgICAgICAgJHVwbG9hZC0+TWltZVR5cGUgPSAkX0ZJTEVTWyRrZXldWyd0eXBlJ107DQogICAgICAgICAgICAgICAgJHVwbG9hZC0+U2l6ZSA9ICRfRklMRVNbJGtleV1bJ3NpemUnXTsNCiAgICAgICAgICAgICAgICAkdXBsb2FkLT5BdXRob3JJRCA9ICR6YnAtPnVzZXItPklEOw0KDQogICAgICAgICAgICAgICAgLy/mo4Dmn6XlkIzmnIjph43lkI0NCiAgICAgICAgICAgICAgICAkZDEgPSBkYXRlKCdZLW0tMDEnLCB0aW1lKCkpOw0KICAgICAgICAgICAgICAgICRkMiA9IGRhdGUoJ1ktbS1kJywgc3RydG90aW1lKGRhdGUoJ1ktbS0wMScsIHRpbWUoKSkgLiAnICsxIG1vbnRoIC0xIGRheScpKTsNCiAgICAgICAgICAgICAgICAkZDEgPSBzdHJ0b3RpbWUoJGQxKTsNCiAgICAgICAgICAgICAgICAkZDIgPSBzdHJ0b3RpbWUoJGQyKTsNCiAgICAgICAgICAgICAgICAkdyA9IGFycmF5KCk7DQogICAgICAgICAgICAgICAgJHdbXSA9IGFycmF5KCc9JywgJ3VsX05hbWUnLCAkdXBsb2FkLT5OYW1lKTsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJz49JywgJ3VsX1Bvc3RUaW1lJywgJGQxKTsNCiAgICAgICAgICAgICAgICAkd1tdID0gYXJyYXkoJzw9JywgJ3VsX1Bvc3RUaW1lJywgJGQyKTsNCiAgICAgICAgICAgICAgICAkdXBsb2FkcyA9ICR6YnAtPkdldFVwbG9hZExpc3QoJyonLCAkdyk7DQogICAgICAgICAgICAgICAgaWYgKGNvdW50KCR1cGxvYWRzKSA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI4LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghJHVwbG9hZC0+Q2hlY2tFeHROYW1lKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI2LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICghJHVwbG9hZC0+Q2hlY2tTaXplKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKDI3LCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICR1cGxvYWQtPlNhdmVGaWxlKCRfRklMRVNbJGtleV1bJ3RtcF9uYW1lJ10pOw0KICAgICAgICAgICAgICAgICR1cGxvYWQtPlNhdmUoKTsNCiAgICAgICAgICAgICAgICAkemJwLT5BZGRDYWNoZSgkdXBsb2FkKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCiAgICBpZiAoaXNzZXQoJHVwbG9hZCkpIHsNCiAgICAgICAgQ291bnRNZW1iZXJBcnJheShhcnJheSgkdXBsb2FkLT5BdXRob3JJRCksIGFycmF5KDAsIDAsIDAsICsxKSk7DQoNCiAgICAgICAgZm9yZWFjaCAoJEdMT0JBTFNbJ2hvb2tzJ11bJ0ZpbHRlcl9QbHVnaW5fUG9zdFVwbG9hZF9TdWNjZWVkJ10gYXMgJGZwbmFtZSA9PiAmJGZwc2lnbmFsKSB7DQogICAgICAgICAgICAkZnBuYW1lKCR1cGxvYWQpOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuICR1cGxvYWQ7DQogICAgfQ0KDQogICAgcmV0dXJuIGZhbHNlOw0KfQ0KDQovKioNCiAqIOWIoOmZpOmZhOS7ti4NCiAqDQogKiBAcmV0dXJuIGJvb2wNCiAqLw0KZnVuY3Rpb24gRGVsVXBsb2FkKCkNCnsNCiAgICBnbG9iYWwgJHpicDsNCiAgICBpZiAoISR6YnAtPkNoZWNrUmlnaHRzKCdVcGxvYWREZWwnKSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoNiwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICAkaWQgPSAoaW50KSBHZXRWYXJzKCdpZCcsICdHRVQnKTsNCiAgICAkdSA9ICR6YnAtPkdldFVwbG9hZEJ5SUQoJGlkKTsNCiAgICBpZiAoJHpicC0+Q2hlY2tSaWdodHMoJ1VwbG9hZEFsbCcpIHx8ICghJHpicC0+Q2hlY2tSaWdodHMoJ1VwbG9hZEFsbCcpICYmICR1LT5BdXRob3JJRCA9PSAkemJwLT51c2VyLT5JRCkpIHsNCiAgICAgICAgJHUtPkRlbCgpOw0KICAgICAgICBDb3VudE1lbWJlckFycmF5KGFycmF5KCR1LT5BdXRob3JJRCksIGFycmF5KDAsIDAsIDAsIC0xKSk7DQogICAgICAgICR1LT5EZWxGaWxlKCk7DQogICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIHJldHVybiB0cnVlOw0KfQ0KDQovLyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQovKioNCiAqIOWQr+eUqOaPkuS7ti4NCiAqDQogKiBAcGFyYW0gc3RyaW5nICRuYW1lIOaPkuS7tklEDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqDQogKiBAcmV0dXJuIHN0cmluZyDov5Tlm57mj5Lku7ZJRA0KICovDQpmdW5jdGlvbiBFbmFibGVQbHVnaW4oJG5hbWUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkYXBwID0gJHpicC0+TG9hZEFwcCgncGx1Z2luJywgJG5hbWUpOw0KICAgIGlmICgoJHJlc3VsdCA9ICRhcHAtPkNoZWNrQ29tcGF0aWJpbGl0eV9HbG9iYWwoJ0VuYWJsZScpKSAhPT0gdHJ1ZSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoJHJlc3VsdC0+Z2V0TWVzc2FnZSgpLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCiAgICBpZiAoKCRyZXN1bHQgPSAkYXBwLT5DaGVja0NvbXBhdGliaWxpdHkoKSkgIT09IHRydWUpIHsNCiAgICAgICAgJHpicC0+U2hvd0Vycm9yKCRyZXN1bHQtPmdldE1lc3NhZ2UoKSwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICB9DQoNCiAgICAkemJwLT5vcHRpb25bJ1pDX1VTSU5HX1BMVUdJTl9MSVNUJ10gPSBBZGROYW1lSW5TdHJpbmcoJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddLCAkbmFtZSk7DQoNCiAgICAkYXJyYXkgPSBleHBsb2RlKCd8JywgJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddKTsNCiAgICAkYXJyYXloYXMgPSBhcnJheSgpOw0KICAgIGZvcmVhY2ggKCRhcnJheSBhcyAkcCkgew0KICAgICAgICBpZiAoaXNfcmVhZGFibGUoJHpicC0+dXNlcnNkaXIgLiAncGx1Z2luLycgLiAkcCAuICcvcGx1Z2luLnhtbCcpKSB7DQogICAgICAgICAgICAkYXJyYXloYXNbXSA9ICRwOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddID0gdHJpbShpbXBsb2RlKCd8JywgJGFycmF5aGFzKSwgJ3wnKTsNCg0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCg0KICAgIHJldHVybiAkbmFtZTsNCn0NCg0KLyoqDQogKiDnpoHnlKjmj5Lku7YuDQogKg0KICogQHBhcmFtIHN0cmluZyAkbmFtZSDmj5Lku7ZJRA0KICoNCiAqIEByZXR1cm4gQXBwfGJvb2wNCiAqLw0KZnVuY3Rpb24gRGlzYWJsZVBsdWdpbigkbmFtZSkNCnsNCiAgICBnbG9iYWwgJHpicDsNCg0KICAgICRhcHAgPSAkemJwLT5Mb2FkQXBwKCdwbHVnaW4nLCAkbmFtZSk7DQogICAgaWYgKCgkcmVzdWx0ID0gJGFwcC0+Q2hlY2tDb21wYXRpYmlsaXR5X0dsb2JhbCgnRGlzYWJsZScpKSAhPT0gdHJ1ZSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoJHJlc3VsdC0+Z2V0TWVzc2FnZSgpLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIFVuaW5zdGFsbFBsdWdpbigkbmFtZSk7DQogICAgJHpicC0+b3B0aW9uWydaQ19VU0lOR19QTFVHSU5fTElTVCddID0gRGVsTmFtZUluU3RyaW5nKCR6YnAtPm9wdGlvblsnWkNfVVNJTkdfUExVR0lOX0xJU1QnXSwgJG5hbWUpOw0KDQogICAgJGFycmF5ID0gZXhwbG9kZSgnfCcsICR6YnAtPm9wdGlvblsnWkNfVVNJTkdfUExVR0lOX0xJU1QnXSk7DQogICAgJGFycmF5aGFzID0gYXJyYXkoKTsNCiAgICBmb3JlYWNoICgkYXJyYXkgYXMgJHApIHsNCiAgICAgICAgaWYgKGlzX3JlYWRhYmxlKCR6YnAtPnVzZXJzZGlyIC4gJ3BsdWdpbi8nIC4gJHAgLiAnL3BsdWdpbi54bWwnKSkgew0KICAgICAgICAgICAgJGFycmF5aGFzW10gPSAkcDsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgICR6YnAtPm9wdGlvblsnWkNfVVNJTkdfUExVR0lOX0xJU1QnXSA9IHRyaW0oaW1wbG9kZSgnfCcsICRhcnJheWhhcyksICd8Jyk7DQoNCiAgICAkemJwLT5TYXZlT3B0aW9uKCk7DQoNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDorr7nva7lvZPliY3kuLvpopjmoLflvI8uDQogKg0KICogQHBhcmFtIHN0cmluZyAkdGhlbWUg5Li76aKYSUQNCiAqIEBwYXJhbSBzdHJpbmcgJHN0eWxlIOagt+W8j+WQjQ0KICoNCiAqIEB0aHJvd3MgRXhjZXB0aW9uDQogKg0KICogQHJldHVybiBzdHJpbmcg6L+U5Zue5Li76aKYSUQNCiAqLw0KZnVuY3Rpb24gU2V0VGhlbWUoJHRoZW1lLCAkc3R5bGUpDQp7DQogICAgZ2xvYmFsICR6YnA7DQoNCiAgICAkYXBwID0gJHpicC0+TG9hZEFwcCgndGhlbWUnLCAkdGhlbWUpOw0KICAgIGlmICgoJHJlc3VsdCA9ICRhcHAtPkNoZWNrQ29tcGF0aWJpbGl0eV9HbG9iYWwoJ0VuYWJsZScpKSAhPT0gdHJ1ZSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoJHJlc3VsdC0+Z2V0TWVzc2FnZSgpLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgIGlmICgoJHJlc3VsdCA9ICRhcHAtPkNoZWNrQ29tcGF0aWJpbGl0eSgpKSAhPT0gdHJ1ZSkgew0KICAgICAgICAkemJwLT5TaG93RXJyb3IoJHJlc3VsdC0+Z2V0TWVzc2FnZSgpLCBfX0ZJTEVfXywgX19MSU5FX18pOw0KICAgIH0NCg0KICAgICRvbGRUaGVtZSA9ICR6YnAtPm9wdGlvblsnWkNfQkxPR19USEVNRSddOw0KICAgICRvbGQgPSAkemJwLT5Mb2FkQXBwKCd0aGVtZScsICRvbGRUaGVtZSk7DQogICAgaWYgKCR0aGVtZSAhPSAkb2xkVGhlbWUpIHsNCiAgICAgICAgaWYgKCgkcmVzdWx0ID0gJG9sZC0+Q2hlY2tDb21wYXRpYmlsaXR5X0dsb2JhbCgnRGlzYWJsZScpKSAhPT0gdHJ1ZSkgew0KICAgICAgICAgICAgJHpicC0+U2hvd0Vycm9yKCRyZXN1bHQtPmdldE1lc3NhZ2UoKSwgX19GSUxFX18sIF9fTElORV9fKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGlmICgkdGhlbWUgIT0gJG9sZFRoZW1lICYmICRvbGQtPmlzbG9hZGVkID09IHRydWUpIHsNCiAgICAgICAgJG9sZC0+U2F2ZVNpZGVCYXJzKCk7DQogICAgfQ0KDQogICAgJHpicC0+b3B0aW9uWydaQ19CTE9HX1RIRU1FJ10gPSAkdGhlbWU7DQogICAgaWYgKCRzdHlsZSA9PSAnJykgew0KICAgICAgICAkc3R5bGVmaWxlcyA9IEdldEZpbGVzSW5EaXIoJHpicC0+dXNlcnNkaXIgLiAndGhlbWUvJyAuICR0aGVtZSAuICcvc3R5bGUnLCAnY3NzJyk7DQogICAgICAgIGlmIChpc19hcnJheSgkc3R5bGVmaWxlcykgJiYgY291bnQoJHN0eWxlZmlsZXMpID4gMCkgew0KICAgICAgICAgICAgJHN0eWxlID0ga2V5KCRzdHlsZWZpbGVzKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRzdHlsZSA9ICdzdHlsZSc7DQogICAgICAgIH0NCiAgICB9DQogICAgJHpicC0+b3B0aW9uWydaQ19CTE9HX0NTUyddID0gJHN0eWxlOw0KICAgIGlmICgkdGhlbWUgIT0gJG9sZFRoZW1lKSB7DQogICAgICAgICRhcHAtPkxvYWRTaWRlQmFycygpOw0KICAgIH0gZWxzZSB7DQogICAgICAgICRhcHAtPlNhdmVTaWRlQmFycygpOw0KICAgIH0NCg0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCg0KICAgIC8vZGVsIG9sZHRoZW1lIFNpZGVCYXJzIGNhY2hlDQogICAgJGFhID0gYXJyYXkoKTsNCiAgICBmb3JlYWNoICgkemJwLT5jYWNoZSBhcyAka2V5ID0+ICR2YWx1ZSkgew0KICAgICAgICBpZiAoc3RyaXBvcygka2V5LCAnc2lkZWJhcnNfJykgIT09IGZhbHNlKSB7DQogICAgICAgICAgICAkYWFbXSA9IHN1YnN0cigka2V5LCA5KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBmb3JlYWNoICgkYWEgYXMgJGtleSA9PiAkdmFsdWUpIHsNCiAgICAgICAgJGEgPSAkemJwLT5Mb2FkQXBwKCd0aGVtZScsICR2YWx1ZSk7DQogICAgICAgIGlmICgkYS0+aXNsb2FkZWQgPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICR6YnAtPmNhY2hlLT5EZWxLZXkoJ3NpZGViYXJzXycgLiAkYS0+aWQpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgJHpicC0+Y2FjaGUtPnRlbXBsYXRlc19tZDVfYXJyYXkgPSAnJzsNCiAgICAkemJwLT5jYWNoZS0+dGVtcGxhdGVzX21kNSA9ICcnOw0KICAgICR6YnAtPlNhdmVDYWNoZSgpOw0KDQogICAgaWYgKCRvbGRUaGVtZSAhPSAkdGhlbWUpIHsNCiAgICAgICAgVW5pbnN0YWxsUGx1Z2luKCRvbGRUaGVtZSk7DQogICAgfQ0KDQogICAgcmV0dXJuICR0aGVtZTsNCn0NCg0KLyoqDQogKiDorr7nva7kvqfmoI8uDQogKi8NCmZ1bmN0aW9uIFNldFNpZGViYXIoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KICAgIGZvciAoJGkgPSAxOyAkaSA8PSA5OyAkaSsrKSB7DQogICAgICAgICRvcHRpb25OYW1lID0gJGkgPT09IDEgPyAnWkNfU0lERUJBUl9PUkRFUicgOiAiWkNfU0lERUJBUnskaX1fT1JERVIiOw0KICAgICAgICAkZm9ybU5hbWUgPSAkaSA9PT0gMSA/ICdzaWRlYmFyJyA6ICJzaWRlYmFyeyRpfSI7DQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJGZvcm1OYW1lXSkpIHsNCiAgICAgICAgICAgICR6YnAtPm9wdGlvblskb3B0aW9uTmFtZV0gPSB0cmltKEdldFZhcnMoJGZvcm1OYW1lLCAnUE9TVCcpLCAnfCcpOw0KICAgICAgICB9DQogICAgfQ0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCiAgICByZXR1cm4gdHJ1ZTsNCn0NCg0KLyoqDQogKiDkv53lrZjnvZHnq5norr7nva7pgInpobkuDQogKg0KICogQHRocm93cyBFeGNlcHRpb24NCiAqLw0KZnVuY3Rpb24gU2F2ZVNldHRpbmcoKQ0Kew0KICAgIGdsb2JhbCAkemJwOw0KDQogICAgZm9yZWFjaCAoJF9QT1NUIGFzICRrZXkgPT4gJHZhbHVlKSB7DQogICAgICAgIGlmIChzdWJzdHIoJGtleSwgMCwgMikgIT09ICdaQycpIHsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKCRrZXkgPT0gJ1pDX1BFUk1BTkVOVF9ET01BSU5fRU5BQkxFJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfQ09NTUVOVF9UVVJOT0ZGJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfQ09NTUVOVF9SRVZFUlNFX09SREVSJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfQ09NTUVOVF9BVURJVCcNCiAgICAgICAgICAgIHx8ICRrZXkgPT0gJ1pDX0RJU1BMQVlfU1VCQ0FURUdPUllTJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfU1lOVEFYSElHSExJR0hURVJfRU5BQkxFJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfQ09NTUVOVF9WRVJJRllfRU5BQkxFJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfQ0xPU0VfU0lURScNCiAgICAgICAgICAgIHx8ICRrZXkgPT0gJ1pDX0FERElUSU9OQUxfU0VDVVJJVFknDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19BUlRJQ0xFX1RIVU1CX1NXSVRDSCcNCiAgICAgICAgICAgIHx8ICRrZXkgPT0gJ1pDX0FQSV9USFJPVFRMRV9FTkFCTEUnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19BUElfRU5BQkxFJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfTE9HSU5fVkVSSUZZX0VOQUJMRScNCiAgICAgICAgKSB7DQogICAgICAgICAgICAkemJwLT5vcHRpb25bJGtleV0gPSAoYm9vbCkgJHZhbHVlOw0KICAgICAgICAgICAgY29udGludWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCRrZXkgPT0gJ1pDX1JTUzJfQ09VTlQnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19VUExPQURfRklMRVNJWkUnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19ESVNQTEFZX0NPVU5UJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfU0VBUkNIX0NPVU5UJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfUEFHRUJBUl9DT1VOVCcNCiAgICAgICAgICAgIHx8ICRrZXkgPT0gJ1pDX0NPTU1FTlRTX0RJU1BMQVlfQ09VTlQnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19NQU5BR0VfQ09VTlQnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19BUlRJQ0xFX1RIVU1CX1RZUEUnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19BUlRJQ0xFX1RIVU1CX1dJRFRIJw0KICAgICAgICAgICAgfHwgJGtleSA9PSAnWkNfQVJUSUNMRV9USFVNQl9IRUlHSFQnDQogICAgICAgICAgICB8fCAka2V5ID09ICdaQ19BUElfRElTUExBWV9DT1VOVCcNCiAgICAgICAgICAgIHx8ICRrZXkgPT0gJ1pDX0FQSV9USFJPVFRMRV9NQVhfUkVRU19QRVJfTUlOJw0KICAgICAgICApIHsNCiAgICAgICAgICAgICR6YnAtPm9wdGlvblska2V5XSA9IChpbnQpICR2YWx1ZTsNCiAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICB9DQogICAgICAgIGlmICgka2V5ID09ICdaQ19VUExPQURfRklMRVRZUEUnKSB7DQogICAgICAgICAgICAkdmFsdWUgPSBzdHJ0b2xvd2VyKCR2YWx1ZSk7DQogICAgICAgICAgICAkdmFsdWUgPSBzdHJfcmVwbGFjZShhcnJheSgnICcsJ+OAgCcpLCAnJywgJHZhbHVlKTsNCiAgICAgICAgICAgICR2YWx1ZSA9IERlbE5hbWVJblN0cmluZygkdmFsdWUsICdwaHAnKTsNCiAgICAgICAgICAgICR2YWx1ZSA9IERlbE5hbWVJblN0cmluZygkdmFsdWUsICdhc3AnKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyR6YnAtPm9wdGlvblska2V5XSA9IHRyaW0oc3RyX3JlcGxhY2UoYXJyYXkoIlxyIiwgIlxuIiksIGFycmF5KCIiLCAiIiksICR2YWx1ZSkpOw0KICAgICAgICAvL+i/memHjOS4jeaLv+aOiVxy5ZKMXG7kuoYNCiAgICAgICAgJHpicC0+b3B0aW9uWyRrZXldID0gJHZhbHVlOw0KICAgIH0NCiAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXSA9IChib29sKSAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXTsNCg0KICAgIGlmICgkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXSkgew0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXSA9IHRydWU7DQogICAgICAgICR6YnAtPm9wdGlvblsnWkNfREVCVUdfTU9ERV9TVFJJQ1QnXSA9IHRydWU7DQogICAgICAgICR6YnAtPm9wdGlvblsnWkNfREVCVUdfTU9ERV9XQVJOSU5HJ10gPSB0cnVlOw0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX0xPR19FUlJPUiddID0gdHJ1ZTsNCiAgICB9IGVsc2Ugew0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREUnXSA9IGZhbHNlOw0KICAgICAgICAkemJwLT5vcHRpb25bJ1pDX0RFQlVHX01PREVfU1RSSUNUJ10gPSBmYWxzZTsNCiAgICAgICAgJHpicC0+b3B0aW9uWydaQ19ERUJVR19MT0dfRVJST1InXSA9IGZhbHNlOw0KICAgIH0NCg0KICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10gPSB0cmltKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10pOw0KICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10gPSB0cmltKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10sICcvJykgLiAnLyc7DQogICAgaWYgKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10gPT0gJy8nKSB7DQogICAgICAgICR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10gPSAkemJwLT5ob3N0Ow0KICAgIH0NCiAgICAkdXNlUEMgPSBmYWxzZTsNCiAgICBmb3IgKCRpID0gMDsgJGkgPCAoc3RybGVuKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10pIC0gMSk7ICRpKyspIHsNCiAgICAgICAgJGwgPSBzdWJzdHIoJHpicC0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXSwgJGksIDEpOw0KICAgICAgICBpZiAob3JkKCRsKSA+PSAxOTIpIHsNCiAgICAgICAgICAgICR1c2VQQyA9IHRydWU7DQogICAgICAgIH0NCiAgICB9DQogICAgaWYgKCR1c2VQQyAmJiBmdW5jdGlvbl9leGlzdHMoJ21iX3N0cnRvbG93ZXInKSkgew0KICAgICAgICAkUHVueWNvZGUgPSBuZXcgUHVueWNvZGUoKTsNCiAgICAgICAgJHpicC0+b3B0aW9uWydaQ19CTE9HX0hPU1QnXSA9ICRQdW55Y29kZS0+ZW5jb2RlKCR6YnAtPm9wdGlvblsnWkNfQkxPR19IT1NUJ10pOw0KICAgIH0NCiAgICAkbGFuZyA9IGluY2x1ZGUgJHpicC0+dXNlcnNkaXIgLiAnbGFuZ3VhZ2UvJyAuICR6YnAtPm9wdGlvblsnWkNfQkxPR19MQU5HVUFHRVBBQ0snXSAuICcucGhwJzsNCiAgICAkemJwLT5vcHRpb25bJ1pDX0JMT0dfTEFOR1VBR0UnXSA9ICRsYW5nWydsYW5nJ107DQogICAgJHpicC0+b3B0aW9uWydaQ19CTE9HX1BST0RVQ1QnXSA9ICdaLUJsb2dQSFAnOw0KICAgICR6YnAtPlNhdmVPcHRpb24oKTsNCg0KICAgIHJldHVybiB0cnVlOw0KfQ0K</file>
	<file name='zb_system\function\c_system_version.php' crc32='C39C1459'>PD9waHANCg0KaWYgKCFkZWZpbmVkKCdaQlBfUEFUSCcpKSB7DQogICAgZXhpdCgnQWNjZXNzIGRlbmllZCcpOw0KfQ0KDQovKg0KICog5a6a5LmJ54mI5pys5Y+3DQoNCui/meaYrzEuNeWPlua2iOeahOaVsOe7hO+8jOiiq+WuieaOkuWIsOW6lOeUqOS4reW/g+WuouaIt+err+eahGluY2x1ZGUucGhw5paH5Lu26YeM44CCDQoj5a6a5LmJ54mI5pys5Y+35YiXDQokemJwdmVycz1hcnJheSgpOw0KJHpicHZlcnNbJzEzMDcwNyddPScxLjAgQmV0YSBCdWlsZCAxMzA3MDcnOw0KJHpicHZlcnNbJzEzMTExMSddPScxLjAgQmV0YTIgQnVpbGQgMTMxMTExJzsNCiR6YnB2ZXJzWycxMzEyMjEnXT0nMS4xIFRhaWNoaSBCdWlsZCAxMzEyMjEnOw0KJHpicHZlcnNbJzE0MDIyMCddPScxLjIgSGlwcG8gQnVpbGQgMTQwMjIwJzsNCiR6YnB2ZXJzWycxNDA2MTQnXT0nMS4zIFdvbmNlIEJ1aWxkIDE0MDYxNCc7DQokemJwdmVyc1snMTUwMTAxJ109JzEuNCBEZWVwbHVlIEJ1aWxkIDE1MDEwMSc7DQokemJwdmVyc1snMTUxNjI2J109JzEuNSBaZXJvIEJ1aWxkIDE1MTYyNic7DQoNCiAqLw0KZGVmaW5lKCdaQ19WRVJTSU9OX01BSk9SJywgJzEnKTsNCmRlZmluZSgnWkNfVkVSU0lPTl9NSU5PUicsICc3Jyk7DQpkZWZpbmUoJ1pDX1ZFUlNJT05fQlVJTEQnLCAnMycpOw0KZGVmaW5lKCdaQ19WRVJTSU9OX0NPTU1JVCcsICczMjk1Jyk7DQpkZWZpbmUoJ1pDX1ZFUlNJT05fQ09ERU5BTUUnLCAnRmluY2gnKTsNCmRlZmluZSgnWkNfVkVSU0lPTicsIFpDX1ZFUlNJT05fTUFKT1IgLiAnLicgLiBaQ19WRVJTSU9OX01JTk9SIC4gJy4nIC4gWkNfVkVSU0lPTl9CVUlMRCAuICcuJyAuIFpDX1ZFUlNJT05fQ09NTUlUKTsNCmlmIChzdHJjYXNlY21wKFpDX1ZFUlNJT05fQ09ERU5BTUUsICdCZXRhJykgPT0gMCB8fCBzdHJjYXNlY21wKFpDX1ZFUlNJT05fQ09ERU5BTUUsICdBbHBoYScpID09IDApIHsNCiAgICBkZWZpbmUoJ1pDX1ZFUlNJT05fRElTUExBWScsIFpDX1ZFUlNJT05fTUFKT1IgLiAnLicgLiBaQ19WRVJTSU9OX01JTk9SIC4gJy4nIC4gWkNfVkVSU0lPTl9CVUlMRCAuICcuJyAuIFpDX1ZFUlNJT05fQ09NTUlUIC4gJyAnIC4gWkNfVkVSU0lPTl9DT0RFTkFNRSk7DQp9IGVsc2Ugew0KICAgIGRlZmluZSgnWkNfVkVSU0lPTl9ESVNQTEFZJywgWkNfVkVSU0lPTl9NQUpPUiAuICcuJyAuIFpDX1ZFUlNJT05fTUlOT1IgLiAnLicgLiBaQ19WRVJTSU9OX0JVSUxEKTsNCn0NCmRlZmluZSgnWkNfVkVSU0lPTl9GVUxMJywgWkNfVkVSU0lPTiAuICcgKCcgLiBaQ19WRVJTSU9OX0NPREVOQU1FIC4gJyknKTsNCmRlZmluZSgnWkNfQkxPR19DT01NSVQnLCBaQ19WRVJTSU9OX0NPTU1JVCk7IC8vIOS4uuWGmeWFpeezu+e7n+mFjee9rue7n+S4gOmjjuagvA0KJEdMT0JBTFNbJ2Jsb2d2ZXJzaW9uJ10gPSBaQ19WRVJTSU9OX01BSk9SIC4gWkNfVkVSU0lPTl9NSU5PUiAuIFpDX1ZFUlNJT05fQ09NTUlUOw0KZGVmaW5lKCdaQ19OT1dfVkVSU0lPTicsICRHTE9CQUxTWydibG9ndmVyc2lvbiddKTsNCmRlZmluZSgnWkNfQkxPR19WRVJTSU9OJywgWkNfVkVSU0lPTl9ESVNQTEFZIC4gJyBCdWlsZCAnIC4gJEdMT0JBTFNbJ2Jsb2d2ZXJzaW9uJ10pOw0KZGVmaW5lKCdaQ19MQVNUX1ZFUlNJT04nLCAnMTczMDAwJyk7IC8v5pWw5o2u5bqT6YeM5YaZ5YWl55qE5pyA5paw55qE5pWw5o2u5bqT54mI5pys5Y+377yI6Z2e57O757uf54mI5pys5Y+377yM5Y+q5pyJ5pu05pS55pWw5o2u5bqT57uT5p6E5omN5Lya5Y+Y5Yqo77yJDQo=</file>
</files>
