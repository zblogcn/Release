/*
*Description:   Theme Javascript
*Author:    toyean
*Website:   https://www.toyean.com/
*Mail:      toyean@qq.com
*Version:   1.3.1(2020-03-10)
*/
$((function(){var e,t,n=document.location,o=$(".sitemap a:last").attr("href"),i=$(".block").attr("data-cateurl");if($(".menu a").each((function(){if(this.href==n.toString().split("#")[0]||$(this).attr("href")==o||$(this).attr("href")==i)return $(this).parents("li").addClass("on").parent(".subnav").prev().addClass("on"),!1})),$(".subnav a").each((function(){if(this.href==n.toString().split("#")[0]||$(this).attr("href")==o||$(this).attr("href")==i)return $(this).addClass("on"),!1})),$(".subcate>a").after('<i class="arrow"></i>'),$(".subcate .arrow").on("click",(function(){return $(this).toggleClass("on").parent().toggleClass("slidedown").siblings().removeClass("slidedown"),!1})),$(".menuico").on("click",(function(){$(this).toggleClass("on"),$(".menu,.fademask").toggleClass("on")})),$(".fademask").click((function(){$(".menu,.menuico,.fademask").removeClass("on")})),$(window).resize((function(){$(window).width()>1080?$(".menu,.fademask").removeClass("on"):$(".menuico").removeClass("on")})),$(".schico.statepop").click((function(){$(this).nextAll(".schbox").addClass("on"),$(".schinput").focus()})),$(".schclose,.schbg").click((function(){$(this).parents(".schbox").removeClass("on")})),$(".schico.statefixed a").click((function(e){return e.stopPropagation(),$(".menuico,.menu").hasClass("on")&&($(".menuico,.menu").removeClass("on"),$(".fademask").remove()),!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)&&$("html, body").animate({scrollTop:0},0),$(this).nextAll(".schfixed").toggleClass("on"),$(".schinput").focus(),!1})),$(document).click((function(e){$(".schfixed").is(e.target)||0!==$(".schfixed").has(e.target).length||$(".schfixed").removeClass("on")})),$(document).keyup((function(e){if(27===e.keyCode)return $(".menu,.menuico,.schico,.schfixed,.fademask").removeClass("on"),!1})),$("#divSearchPanel form,.menu form,.hellosch form,.errorpage form").submit((function(){if(0==$(this).find("input[type=text]").val().length)return $(this).find("input[type=text]").focus(),!1})),$("#txaArticle").focus((function(){$(".cmtform .text").length>0&&$(".cmtform").slideDown()})),zbp.plugin.unbind("comment.reply.start","system"),zbp.plugin.on("comment.reply.start","tpure",(function(e){var t=e;$("#inpRevID").val(t);var n=$("#divCommentPost"),o=$("#cancel-reply");n.before($("<div id='temp-frm' style='display:none'>")).addClass("reply-frm"),$("#AjaxComment"+t).parents(".cmtscon").find(".cmtsfoot").before(n),o.show().click((function(){var e=$("#temp-frm");if($("#inpRevID").val(0),e.length&&n.length)return e.before(n),e.remove(),$(this).hide(),n.removeClass("reply-frm"),!1}));try{$("#txaArticle").focus()}catch(e){}return!1})),zbp.plugin.on("comment.get","tpure",(function(e,t){$("span.commentspage").html("Waiting...")})),zbp.plugin.on("comment.got","tpure",(function(){$("#cancel-reply").click()})),zbp.plugin.on("comment.post.success","tpure",(function(e,t,n,o){$(".cmts").removeAttr("data-content"),$(".cmts").removeClass("nocmt"),"0"!==e.replyid.toString()&&($("#AjaxComment"+e.replyid).parents(".cmtscon").find(".cmtsitem").remove(),$("#AjaxComment"+e.replyid).parents(".cmtscon").append(t.data.html)),$("#cancel-reply").click(),location.reload()})),$(".single.indent .ue-image").parents("p").css("text-indent","0"),$("[data-confirm]").click((function(){var e=$(this).data("confirm");return!!confirm(e)})),tpure.backtotop&&(e=$('<a class="backtotop"><i></i></a>').appendTo($(".edgebar")).attr("title","返回顶部").click((function(){$("html, body").animate({scrollTop:0},100)})),t=function(){var t=$(document).scrollTop(),n=$(window).height();t>=100?e.show():e.hide(),window.XMLHttpRequest||e.css("top",t+n-166)},$(window).bind("scroll",t),t()),tpure.fixmenu&&$(window).scroll((function(){var e=$(window).scrollTop(),t=$(".header").data("headh");e<=t&&$(".header").removeClass("headbg"),e>=t&&$(".header").addClass("headbg")})),tpure.bannerdisplay&&$(".banner").length>0){var s=$(window),a=$(".banner").offset().top+$(".banner").outerHeight();function r(){$(window).scroll((function(){if($(document).scrollTop()<a){var e=$(window).scrollTop()/2;$(".banner").css("backgroundPositionY",e)}}))}r(),s.resize((function(){r()})),s.bind("scroll",(function(){r()}))}if(tpure.singlekey){var c=$(".single-prev").attr("href"),l=$(".single-next").attr("href");$("body").keydown((function(e){37==e.keyCode&&null!=c&&(location=c),39==e.keyCode&&null!=l&&(location=l)}))}if(tpure.pagekey){var u=$(".pagebar .now-page").prev().attr("href"),p=$(".pagebar .next-page a").attr("href");$("body").keydown((function(e){37==e.keyCode&&null!=u&&(location=u),39==e.keyCode&&null!=p&&(location=p)}))}if(tpure.removep&&$(".postcon p").each((function(){var e=$(this).html();"&nbsp;"!==e&&"<br>"!==e&&" "!==e||$(this).remove()})),tpure.viewall){var m=tpure.viewallheight,d=tpure.viewallstyle,f=$(".postcon").outerHeight(),h=document.location.pathname.split("/"),g=h.length,v='<style type="text/css">.postcon{ height:'+m+"px;}</style>";$("body").prepend(v);var b=$(".postcon").outerHeight(),y=100-Math.ceil(b/f*100);y>0&&h[g-1].indexOf("_")<0?("1"==d?$(".postcon").append('<div class="teles"><i>阅读剩余的'+y+"%</i></div>"):$(".postcon").append('<div class="telesmore"><i>阅读更多</i></div>'),$(".teles,.telesmore").on("click",(function(){return $(".postcon").animate({height:f},(function(){$(".postcon").height("auto")})),$(this).remove(),!1}))):$(".postcon").css("height","auto")}}));